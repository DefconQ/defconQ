<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/dictionariesTables" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Dictionaries and Tables | DefconQ</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://DefconQ.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://DefconQ.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://DefconQ.github.io/docs/concepts/dictionariesTables"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Dictionaries and Tables | DefconQ"><meta data-rh="true" name="description" content="In this blog post, we explore two key data types native to KDB/Q: Dictionaries and Tables. Unlike mainstream programming languages like Java, which lack native support for these data types and require alternative structures (e.g., Java HashMap for dictionaries or Java ArrayList for lists of rows to represent tables), KDB/Q inherently supports both Dictionaries and Tables. Understanding these data structures is crucial for leveraging the speed and performance of KDB/Q to build efficient big data applications. In the following sections, we will examine the most important concepts of both data types, a in detail explanation of dictionaries and tables is beyond the scope of this blog post and can be found in Chapter 5 - Dictionaries and Chapter 8 - Tables of Q for Mortals."><meta data-rh="true" property="og:description" content="In this blog post, we explore two key data types native to KDB/Q: Dictionaries and Tables. Unlike mainstream programming languages like Java, which lack native support for these data types and require alternative structures (e.g., Java HashMap for dictionaries or Java ArrayList for lists of rows to represent tables), KDB/Q inherently supports both Dictionaries and Tables. Understanding these data structures is crucial for leveraging the speed and performance of KDB/Q to build efficient big data applications. In the following sections, we will examine the most important concepts of both data types, a in detail explanation of dictionaries and tables is beyond the scope of this blog post and can be found in Chapter 5 - Dictionaries and Chapter 8 - Tables of Q for Mortals."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://DefconQ.github.io/docs/concepts/dictionariesTables"><link data-rh="true" rel="alternate" href="https://DefconQ.github.io/docs/concepts/dictionariesTables" hreflang="en"><link data-rh="true" rel="alternate" href="https://DefconQ.github.io/docs/concepts/dictionariesTables" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://R6JV2N50EX-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="DefconQ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="DefconQ Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E9ED09HNE3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E9ED09HNE3",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="DefconQ" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.5860f28a.css">
<script src="/assets/js/runtime~main.52ff1080.js" defer="defer"></script>
<script src="/assets/js/main.592991e6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#74e8a3" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">If you would like to connect, please reach out on <a href="https://www.linkedin.com/in/alexanderunterrainer/">Linkedin</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="DefconQ Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="150" width="50"><img src="/img/logoLight.svg" alt="DefconQ Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="150" width="50"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Learn</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/about/about">About</a><a class="navbar__item navbar__link" href="/cv/cv">CV</a><a href="https://defconq.substack.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Newsletter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/DefconQ" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/kdbq-language">KDB/Q Language</a><button aria-label="Expand sidebar category &#x27;KDB/Q Language&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/kdb-architecture">KDB Architecture</a><button aria-label="Expand sidebar category &#x27;KDB Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/important-concepts">Important Concepts</a><button aria-label="Collapse sidebar category &#x27;Important Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/attributes">Attributes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/memoryManagement">Memory Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/garbageCollection">Garbage Collection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/amend">Amend, Amend At: The Swiss Army knife among KDB/Q operators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/concepts/dictionariesTables">Dictionaries and Tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/qsql">QSQL - Querying Your Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/fby">Mastering the Art of Filtering: An In-Depth Look at fby in KDB/Q</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/tutorials">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/productivity-tools">Productivity Tools</a><button aria-label="Expand sidebar category &#x27;Productivity Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/important-concepts"><span itemprop="name">Important Concepts</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Dictionaries and Tables</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Dictionaries and Tables</h1>
<p>In this blog post, we explore two key data types native to KDB/Q: <strong>Dictionaries and Tables</strong>. Unlike mainstream programming languages like Java, which lack native support for these data types and require alternative structures (e.g., Java HashMap for dictionaries or Java ArrayList for lists of rows to represent tables), KDB/Q inherently supports both Dictionaries and Tables. Understanding these data structures is crucial for leveraging the speed and performance of KDB/Q to build efficient big data applications. In the following sections, we will examine the most important concepts of both data types, a in detail explanation of dictionaries and tables is beyond the scope of this blog post and can be found in <a href="https://code.kx.com/q4m3/5_Dictionaries/#50-overview" target="_blank" rel="noopener noreferrer">Chapter 5 - Dictionaries</a> and <a href="https://code.kx.com/q4m3/8_Tables/" target="_blank" rel="noopener noreferrer">Chapter 8 - Tables</a> of <a href="https://code.kx.com/q4m3/" target="_blank" rel="noopener noreferrer">Q for Mortals</a>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>As noted on the <a href="https://code.kx.com/q/ref/#datatypes" target="_blank" rel="noopener noreferrer">reference page</a> at <a href="https://code.kx.com/home/" target="_blank" rel="noopener noreferrer">code.kx.com</a>, dictionaries are of type 99h, while tables are of type 98h.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dictionaries">Dictionaries<a href="#dictionaries" class="hash-link" aria-label="Direct link to Dictionaries" title="Direct link to Dictionaries">​</a></h2>
<p>In its simplest form, a dictionary is simply a mapping of a list of keys to a list of values, and it can be created using the <a href="https://code.kx.com/q/ref/dict/" target="_blank" rel="noopener noreferrer">bang operator <code>!</code></a>. Let&#x27;s look at an example:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-dictionaries">Creating Dictionaries<a href="#creating-dictionaries" class="hash-link" aria-label="Direct link to Creating Dictionaries" title="Direct link to Creating Dictionaries">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Create a list of keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)k:`a`b`c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Create a list of values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)v:1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Create the mapping between keys and values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)k!v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Create a dictionary directly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`a`b`c!1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The keywords <a href="https://code.kx.com/q/ref/key/" target="_blank" rel="noopener noreferrer"><code>key</code></a>  and <a href="https://code.kx.com/q/ref/value/" target="_blank" rel="noopener noreferrer"><code>value</code></a> can be used to extract the keys and values from a dictionary, respectively.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d:`a`b`c!1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)key d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`a`b`c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)value d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>Dictionaries are highly flexible data structures. The main constraint when creating a dictionary is that the length of the keys list must match the length of the values list. If they don&#x27;t match, a <a href="https://code.kx.com/q/basics/errors/" target="_blank" rel="noopener noreferrer"><code>length error</code></a> will occur.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)`a`b`c!1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;length</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  `a`b`c!1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             ^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To demonstrate the flexibility of dictionaries, note that the type of the list of keys or values doesn’t have to be homogeneous. However, once you create a homogeneous list of keys or values, any new key or value added must match the existing types. This might sound complex, but it&#x27;s easier to understand with some examples. Let&#x27;s take a look.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Create a dictionary with a list of non-homogenous keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show d:(`a;10;&quot;C&quot;)!1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`a | 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10 | 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;C&quot;| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Add a new key of type integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d[2]:4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`a | 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10 | 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;C&quot;| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2  | 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Add another key of type symbol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d[`b]:9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`a | 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10 | 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;C&quot;| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2  | 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`b | 9</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As shown in the example above, the keys of our dictionary can be of different types, allowing us to add new keys of any type. However, the values of the dictionary are all <a href="https://code.kx.com/q/ref/#datatypes" target="_blank" rel="noopener noreferrer"><code>long 7h</code></a>. Attempting to add a record where the value type doesn&#x27;t match the current value types will result in a type error.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Verify the data type of the keys of our dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)type value d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Trying to add a new record with a symbol as value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d[&quot;z&quot;]:`hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  d[&quot;z&quot;]:`hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             ^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With the release of KDB/Q <a href="https://code.kx.com/q//releases/ChangesIn4.1/" target="_blank" rel="noopener noreferrer">version 4.1</a>, <a href="https://kx.com" target="_blank" rel="noopener noreferrer">KX</a> introduced a new dictionary syntax that enhances both the readability and flexibility of the language. In KDB/Q 4.1, you can now define dictionaries as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)([a:1;b:2;c:3])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is especially useful for creating empty or singleton dictionaries, which was quite verbose and cumbersome before version 4.1. See for yourself:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Creating an empty, untyped dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d:()!()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)0N!d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">()!()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Creating an empty dictionary with keys of type integer and values of type symbol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d:(`int$())!`symbol$()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)0N!d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(`int$())!`symbol$()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Creating a singleton dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)enlist[`a]!enlist 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In contrast, with KDB/Q version 4.1 above dictionary definitions became much easier and more readable</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Creating an empty dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d:([])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)0N!d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(`symbol$())!()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Creating a singleton dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d:([a:3])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="indexing-into-a-dictionary">Indexing into a dictionary<a href="#indexing-into-a-dictionary" class="hash-link" aria-label="Direct link to Indexing into a dictionary" title="Direct link to Indexing into a dictionary">​</a></h3>
<p>When you index into a dictionary, you are essentially performing a dictionary lookup, accessing a dictionary <code>d</code> to retrieve the value <code>v</code> at the specified key <code>k</code>. You can index into a dictionary using both, brackets and postfix notation</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d:`a`b`c!1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Indexing into a dictionary using bracket notation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d[`a]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Indexing into a dictionary using postfix notation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d`a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Ensuring both notations return the same result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d[`a]~d`a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can also retrieve multiple elements using a list of keys as index</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d:`a`b`c!1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d[`a`b]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d`a`b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, due to the flexibility of dictionaries, their keys don&#x27;t have to be unique, allowing the same key to be used multiple times. This can lead to unexpected results when retrieving elements stored at a key that&#x27;s used more than once.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d:`a`b`c`a`b`c`d!til 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d| 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d`a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d`b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d?3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reverse-lookup-finding-values">Reverse Lookup: Finding values<a href="#reverse-lookup-finding-values" class="hash-link" aria-label="Direct link to Reverse Lookup: Finding values" title="Direct link to Reverse Lookup: Finding values">​</a></h3>
<p>Indexing into a dictionary is straightforward and a common operation. However, there are times when we need to perform the reverse operation: finding the key associated with a specific value. This is called a reverse lookup and we can accomplish this using the <a href="https://code.kx.com/q/ref/find/" target="_blank" rel="noopener noreferrer"><code>find ?</code></a> operator as follows</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d:`a`b`c!1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d?3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>One drawback of the <code>find ?</code> operator is that, for a list with non-unique elements, it will only return the index of the first occurrence of an element that appears multiple times. When applied to a dictionary, if the value being searched for occurs multiple times, only the first key associated with that value will be returned.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d:`a`b`c`d`e`f!1 2 3 1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d?1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>But don&#x27;t worry. Fortunately, we can use the <a href="https://code.kx.com/q/basics/comparison/#six-comparison-operators" target="_blank" rel="noopener noreferrer"><code>equals =</code></a> operator along with the <a href="https://code.kx.com/q/ref/where/" target="_blank" rel="noopener noreferrer"><code>where</code></a> keyword to find all keys for the value we&#x27;re searching for. The following method will return exactly what you need.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d:`a`b`c`d`e`f!1 2 3 1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// When comparing a dictionary to a value, the comparison is applied to every value of the dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// resulting in a boolean mask, indicating 1 where the comparison is true, and 0 where it is false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e| 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f| 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// We can now leverage where to obtain the keys where the boolean mask is 1b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)where d=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`a`d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The code snippet above highlights a crucial concept about dictionaries. Fully understanding this will enhance your skills as a KDB/Q developer: the key-value mapping of a dictionary is analogous to the index-value mapping of a list. To clarify, if you have a list of numbers from 0 to 10, each number is implicitly mapped to its index—0 is mapped to index 0 (since KDB/Q uses zero-based indexing), 1 to index 1, 2 to index 2, and so forth. In a dictionary, this same index-value mapping occurs, but with keys serving as the index instead of numerical values. Moreover, there&#x27;s nothing stopping you from creating a dictionary with numerical keys mapped to numerical values. Remembering that operations on dictionaries affect their values while leaving keys unchanged provides a powerful tool for your development. Let me illustrate what I just explained</p></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Creating a dictionary mapping the numbers 0 to 5 to the corresponding value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)0 1 2 3 4!0 1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0| 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4| 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// same operation but in q-style</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)x!x:til 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0| 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4| 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d:x!x:til 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// indexing into the dictionary at index 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Creating a list of values from 0 to 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)l:til 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// indexing into the list at index 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)l 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Showing that both operations return the same result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d[0]~l 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="operations-on-a-single-dictionary">Operations on a single Dictionary<a href="#operations-on-a-single-dictionary" class="hash-link" aria-label="Direct link to Operations on a single Dictionary" title="Direct link to Operations on a single Dictionary">​</a></h3>
<p>One of the great features of KDB/Q dictionaries is that applying a function to a dictionary effectively applies it to the dictionary&#x27;s value list. Let me show you some examples:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// First we create a dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d:`a`b`c!1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// We can convert all values to their corresponding negative value by using the keyword neg </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)neg d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| -1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| -2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| -3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Find the minimum value in the dictinary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)min d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Multiply all values by 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)2*d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Compare the values of the dictionary to the value 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// count returns the length of the dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)count d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Return the first value of the dictionary d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)first d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Return the last value of the dictionary d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)last d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There are many other useful operations you can perform on dictionaries. For a detailed explanation, please refer to <a href="https://code.kx.com/q4m3/5_Dictionaries/" target="_blank" rel="noopener noreferrer">Chapter 5: Dictionaries</a> in Q for Mortals.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="operations-involving-multiple-dictionaries">Operations involving multiple Dictionaries<a href="#operations-involving-multiple-dictionaries" class="hash-link" aria-label="Direct link to Operations involving multiple Dictionaries" title="Direct link to Operations involving multiple Dictionaries">​</a></h3>
<p>We&#x27;ve already seen how to apply functions to a single dictionary. In this section, we&#x27;ll explore how to use two or more dictionaries together with the KDB/Q operators we&#x27;ve covered so far. When applying functions such as addition, subtraction, multiplication or division to two dictionaries, the operation will match all common keys and apply the function to the value(s) of the matching key(s). Let&#x27;s illustrate this with an example</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d1:`a`b`c!1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d2:`a`b`c!4 5 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d1+d2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d1-d2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| -3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| -3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| -3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d1*d2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d1%d2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 0.25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 0.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 0.5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>But what happens if any of the two dictionaries contains non matching keys?</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d1+`a`b`d!6 7 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d| 8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As demonstrated above, the result is the union of the records in both dictionaries. The function is applied to all records where the keys match, and records without matching keys are amended using the <a href="https://code.kx.com/q4m3/5_Dictionaries/#527-arithmetic-and-relational-operations" target="_blank" rel="noopener noreferrer">identity element</a> (0 for addition and subtraction and 1 for multiplication and division) of the operation as the second parameter.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="appending-and-amending-dictionaries">Appending and Amending dictionaries<a href="#appending-and-amending-dictionaries" class="hash-link" aria-label="Direct link to Appending and Amending dictionaries" title="Direct link to Appending and Amending dictionaries">​</a></h3>
<p>Now that we&#x27;ve explored how operators work on dictionaries, let&#x27;s see how to insert new records into a dictionary. Adding a new record is straightforward: simply introduce a new key and assign it the value you want to insert.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)show d:`a`b`c!1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d[`d]:4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d| 4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Updating existing records is just as simple as inserting new ones. Just index into the dictionary using the existing key and assign the new value to it.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d[`d]:5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d| 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The only restriction for both operations is that the type of the new value you are inserting matches the type of the existing values of your dictionary.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d[`d]:`test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  d[`d]:`test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d[`e]:`test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  d[`e]:`test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="joining-dictionaries">Joining Dictionaries<a href="#joining-dictionaries" class="hash-link" aria-label="Direct link to Joining Dictionaries" title="Direct link to Joining Dictionaries">​</a></h3>
<p>One of the great features of dictionaries is their behavior when joined. Since a dictionary is just a key-value mapping, joining two dictionaries will update the values of all matching keys in the first dictionary with the corresponding values from the second dictionary. Let&#x27;s demonstrate this:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)d1:`a`b`c!1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d2:`a`b`c!10 20 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d1,d2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 30</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This feature is especially useful when designing your Application Programming Interfaces (APIs). You can pass a dictionary containing all the parameters for your API and within your function, you can then define a dictionary with the default parameters needed for your API&#x27;s functionality. By joining the user-provided dictionary with the default parameters dictionary, you obtain all the necessary parameters. Let&#x27;s look at some code to illustrate this concept.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function:{[param]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	default:`a`b`c!1 2 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	res:defalut,param;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	:res</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)function[`a`b!10 20]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="column-dictionaries">Column Dictionaries<a href="#column-dictionaries" class="hash-link" aria-label="Direct link to Column Dictionaries" title="Direct link to Column Dictionaries">​</a></h3>
<p>Now that we&#x27;ve covered the basics of dictionaries, we can move on to a crucial concept for understanding our next topic: tables. This concept is column dictionaries, which form the foundation of tables. A column dictionary is a dictionary where each key is of type symbol, and each value is a list of values with the same length as all the other values. The formal definition is</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">`c1...`cN!(v1;...;vN)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">where </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> - each c1 is a column name as symbol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> - each v1 is a list of values</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let&#x27;s look at a more practical example</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)team:`name`age!(`Bob`Joe`Frank;25 35 40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)team</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| Bob Joe Frank</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 25  35  40</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see, this dictionary contains two keys, <code>name</code> and <code>age</code>, which map to the corresponding names and ages of our team members. To retrieve all the names, you can index into the dictionary using the key <code>name</code> like this <code>team[`name]</code>.  Similarly, to get the ages of our team, you would use <code>team[`age]</code>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Retrieve the names of the team</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)team[`name]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`Bob`Joe`Frank</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Retrieve the age of the team</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)team[`age]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">25 35 40</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Since each value in a column dictionary is actually a list, we can index into these lists as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Indexing into a list of values for the name key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)team[`name] 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`Joe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Using nested indexing to achieve the same</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)team[`name;1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`Joe</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, if you recall, creating a singleton dictionary was somewhat cumbersome, and the same applies to a singleton column dictionary. Since a dictionary is a list of keys mapped to a list of values (or, in the case of a column dictionary, a list of lists), we need to use <code>enlist</code> to create a singleton column dictionary.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)enlist[`name]!enlist `Bob`Joe`Frank</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| Bob Joe Frank</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Luckily for us, this is much simpler with KDB/Q version 4.1</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)([name:`Bob`Joe`Frank])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| Bob Joe Frank</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We’ve covered a lot about dictionaries so far, and now it&#x27;s time to discuss the most important concept regarding column dictionaries. A <em>flipped column dictionary</em> is simply a <em>table</em>. Yes, that&#x27;s right. If you flip a column dictionary, you get a table. Let&#x27;s see this in practice.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Column Dictionary team, mapping name and age keys to a list of names and their corresponding ages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)team</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| Bob Joe Frank</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 25  35  40</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Creating a table by flipping a column dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show t:flip team</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name  age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bob   25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe   35</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Frank 40</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Additionally, it&#x27;s worth noting that a table can be seen as a list of dictionaries that all conform, meaning the dictionaries share the same keys. In fact, KDB/Q will always aggregate a list of conforming dictionaries into a table.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Create a list of dictionaries that are all conform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)((`name`age!(`Bob;25));(`name`age!(`Joe;35));(`name`age!(`Frank;40)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name  age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bob   25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe   35</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Frank 40</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This understanding clarifies that we can access records in a table in the same way we index into a list, using position indexes. For instance, to retrieve the second record of our table, we simply use the index 1.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Indexing into a table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| `Joe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 35</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Indexing into a list of conform dictionaries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)((`name`age!(`Bob;25));(`name`age!(`Joe;35));(`name`age!(`Frank;40))) 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| `Joe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 35</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Verify that above results are in fact the same</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t[1]~((`name`age!(`Bob;25));(`name`age!(`Joe;35));(`name`age!(`Frank;40))) 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Last but not least, I&#x27;ll explain why table operations are so performant and fast in KDB/Q. Tables are essentially column dictionaries, where each value is a list. Since KDB/Q is a vector/array programming language, operations on lists or vectors are highly efficient. Therefore, tables are represented as flipped column dictionaries in the background, rather than as a list of rows (simple dictionaries). This structure enables super-fast operations on columns, making KDB/Q much faster than conventional programming languages.</p>
<p>We&#x27;ll pause here for now, giving you time to absorb all the information covered in this blog. I&#x27;ll update the blog later with a more detailed explanation of tables. If you have any questions, feel free to reach out.</p>
<p><strong>Happy Coding!</strong></p>
<p>Now, let&#x27;s continue. Last time, we discussed dictionaries, exploring their features, behaviors, and operations. We also covered column dictionaries and highlighted their key attribute: a flipped column dictionary becomes a table. Now, we will shift our focus to tables. Ensure you have a solid understanding of dictionaries, and if you need a refresher, feel free to revisit the previous section.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tables">Tables<a href="#tables" class="hash-link" aria-label="Direct link to Tables" title="Direct link to Tables">​</a></h2>
<p>As previously mentioned, dictionaries and tables are native data types in KDB/Q, meaning they are first-class citizens and reside in memory just like lists. If you consider a table as a flipped column dictionary, you can think of it as a collection of named columns. This column-oriented structure, as opposed to a row-oriented one, is one of the reasons why KDB/Q excels at processing big data compared to relational databases. Furthermore, since lists are allocated in contiguous memory, so are columns, making data retrieval, manipulation, and storage highly efficient.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-tables">Creating Tables<a href="#creating-tables" class="hash-link" aria-label="Direct link to Creating Tables" title="Direct link to Creating Tables">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="flipped-column-dictionary">Flipped column dictionary<a href="#flipped-column-dictionary" class="hash-link" aria-label="Direct link to Flipped column dictionary" title="Direct link to Flipped column dictionary">​</a></h4>
<p>The first method for creating a table is to start with a column dictionary. Since a flipped column dictionary is a table, let&#x27;s begin with this approach.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// flipped column dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show t:flip `names`age!(`Alexander`Stephan`Christoph;37 27 34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">names     age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 37</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)0N!t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+`names`age!(`Alexander`Stephan`Christoph;37 27 34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">names     age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 37</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see from the above code, our flipped column dictionary is now represented as a table. However, upon closer inspection, we can observe that KDB/Q hasn&#x27;t actually transposed the column dictionary in the background. Instead, it has only annotated that the data should be treated as a table. Keeping our table stored as a collection of named columns (i.e., lists) minimizes memory usage and enhances performance by enabling vectorized mathematical operations.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can use <code>0N!</code> for debugging and to see what&#x27;s happening behind the scenes. As shown, the table is represented as <code>+`names`age!(`Alexander`Stephan`Christoph;37 27 34)</code>, which is a flipped column dictionary. The <code>+</code> operator is k-code for flipped.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)flip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find some documentation about exposed infrastructure <a href="https://code.kx.com/q/basics/exposed-infrastructure/" target="_blank" rel="noopener noreferrer">here</a></p></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Creating a table by flipping a dictionary only works for column dictionaries. Remember, a column dictionary has symbols as keys, and each list must be of equal length, or be an atom that will automatically expand to match the length of the other lists.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)flip 1 2!(1 2 3;4 5 6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;nyi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  flip 1 2!(1 2 3;4 5 6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)flip `a`b!(1 2;4 5 6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;length</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  flip `a`b!(1 2;4 5 6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)flip `a`b!(1;4 5 6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="list-of-conform-dictionaries">List of conform dictionaries<a href="#list-of-conform-dictionaries" class="hash-link" aria-label="Direct link to List of conform dictionaries" title="Direct link to List of conform dictionaries">​</a></h4>
<p>Another way of looking at tables is to see them as a list of conforming dictionaries. In fact, whenever you have a list of conforming dictionaries, KDB/Q will automatically convert it into a table. Let&#x27;s take a look at this in practice.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)count (`name`age!(`Alexander;37);`name`age!(`Stephan;27);`name`age!(`Christoph;34))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)first(`name`age!(`Alexander;37);`name`age!(`Stephan;27);`name`age!(`Christoph;34))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| `Alexander</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 37</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)last(`name`age!(`Alexander;37);`name`age!(`Stephan;27);`name`age!(`Christoph;34))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| `Christoph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(`name`age!(`Alexander;37);`name`age!(`Stephan;27);`name`age!(`Christoph;34))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 37</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We first created a list of three conforming dictionaries and demonstrated that it is indeed a list by using the <code>count</code>,<code>first</code> and <code>last</code> operators to obtain the length of our list and the first and last elements, respectively. Then, we returned the list of conforming dictionaries and observed that KDB/Q automatically converts it into a table. Let&#x27;s use <code>0N!</code> to see what&#x27;s happening behind the scenes.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)0N!(`name`age!(`Alexander;37);`name`age!(`Stephan;27);`name`age!(`Christoph;34))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+`name`age!(`Alexander`Stephan`Christoph;37 27 34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 37</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In fact, our list of conforming dictionaries has been transformed into a table. This transformation makes memory allocation more efficient and operations on columns more performant due to the ability to use vectorized operations. But what about the operations we just applied to our list of conforming dictionaries? Will they still be valid for a table? Let&#x27;s find out.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)show t:(`name`age!(`Alexander;37);`name`age!(`Stephan;27);`name`age!(`Christoph;34))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 37</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)count t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)first t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| `Alexander</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 37</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)last t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| `Christoph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see, the operations we applied to the list of conforming dictionaries can also be applied to our table. To verify whether a list of conforming dictionaries is truly a table, we can inspect its type using the <code>type</code> operator</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)type (`name`age!(`Alexander;37);`name`age!(`Stephan;27);`name`age!(`Christoph;34))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">98h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you recall, type 98h indicates a table. Feel free to verify this information <a href="https://code.kx.com/q/ref/#datatypes" target="_blank" rel="noopener noreferrer">here</a> if you have any doubts.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="formal-table-defintion">Formal Table defintion<a href="#formal-table-defintion" class="hash-link" aria-label="Direct link to Formal Table defintion" title="Direct link to Formal Table defintion">​</a></h4>
<p>Finally, let&#x27;s explore the formal method of creating a table by leveraging the concept of a table being a collection or list of named columns. This approach is particularly useful when creating empty tables and defining the schema of the data we aim to capture.</p>
<p>A table can be formaly defined like</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">([] c1:L1; c2:L2; ... ; cn:Ln)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">where ci is a column name and Li is the corresponding list of column values</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let&#x27;s have a look at a practical example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)show t:([] name:`Alex`Stephan`Christop; age:36 27 34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christop 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Creating a table from data is straightforward, and defining an empty table schema, enforcing the column types is just as simple. Here&#x27;s the code to do so:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)show t:([] name:`symbol$(); age:`int$())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The keyword <a href="https://code.kx.com/q/ref/meta/" target="_blank" rel="noopener noreferrer"><code>meta</code></a> allows you to inspect the schema of a table. You can read more about it <a href="https://code.kx.com/q/ref/meta/" target="_blank" rel="noopener noreferrer">here</a></p></div></div>
<p>The schema of our table is now defined, and KDB/Q ensures that all types of the records we insert match the column types specified in the schema. Even if just one element of the record we&#x27;re trying to insert doesn&#x27;t match the type of the corresponding column, a <code>type</code> error will be thrown.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)`t insert (`Alexander;36i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`t insert (`Alex;`WrongType)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  `t insert (`Alex;`WrongType)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)meta t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c   | t f a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----| -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | i</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We&#x27;ll provide additional examples of how to insert records into a table later in the post.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="keyed-tables-vs-tables">Keyed Tables vs Tables<a href="#keyed-tables-vs-tables" class="hash-link" aria-label="Direct link to Keyed Tables vs Tables" title="Direct link to Keyed Tables vs Tables">​</a></h3>
<p>Another great feature of tables is that you can add a key to them, creating a keyed table. A key is basically a unique identifier, similar to a primary key in a traditional SQL database. Adding a key to a table is essential for performing joins between tables, which are powerful tools for merging datasets. This capability is one of the reasons why KDB/Q is so performant. We will cover joins in a dedicated blog post.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-keyed-table">Creating a keyed table<a href="#creating-a-keyed-table" class="hash-link" aria-label="Direct link to Creating a keyed table" title="Direct link to Creating a keyed table">​</a></h4>
<p>Adding a key to an existing table is straightforward using the <a href="https://code.kx.com/q/ref/keys/#xkey" target="_blank" rel="noopener noreferrer"><code>xkey</code></a> keyword. All you have to do, is to specify the column you would like to use as key and execute following code:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)show t:([] name:`Alexander`Stephan`Christoph; age:36 26 34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show kt:`name xkey t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Comparing the console output of the first table with the output of the second table illustrates that we have successfully added a key to our table, creating a keyed table <code>kt</code>, making the <code>name</code> column the unique identifier. Attempting to insert records with an existing key in the keyed table will result in an error, whereas new records with unique keys can still be inserted.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)`kt insert (`Alexander;34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;insert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  `kt insert (`Alexander;34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`kt insert (`Alex;34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A keyed table can have multiple columns as keys; you are not limited to just one. Let&#x27;s add another column to our keyed table and demonstrate how to create a keyed table with two columns as keys.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// We first add a date column to our table and then key on date and name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`date`name xkey update date:.z.d from kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">date       name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Alex     | 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Another easy way to create a keyed table from an existing table is by using the <a href="https://code.kx.com/q/ref/enkey/" target="_blank" rel="noopener noreferrer"><code>bang !</code></a> operator. Just specify the number of keys you want to apply using the pattern <code>n!table</code>, and the first <code>n</code> columns will be used as keys. To unkey a table, or convert a keyed table back into a simple table, use <code>0!keyedTable</code>. Alternatively, you can also use <code>xkey</code> with an empty list <code>()</code> to unkey a keyed table.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)1!t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)xkey[`name;t]~1!t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)2!update date:.z.d from t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age| date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------| ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36 | 2024.06.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26 | 2024.06.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34 | 2024.06.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)0!kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)() xkey kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>One key difference between the <code>bang !</code> operator and trhe <code>xkey</code> operator is that with the bang operator, you cannot specify the order of the columns used as keys. The bang operator will simply use the first <code>n</code> columns as keys. However, with <code>xkey</code>, you can specify the order of the keys by listing the column names in the desired order. Below example should highlight this</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)`date`name xkey update date:.z.d from kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">date       name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)2!update date:.z.d from t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age| date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------| ----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36 | 2024.06.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26 | 2024.06.28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34 | 2024.06.28</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Last but not least, I would like to show you the formal definition of a keyed table, similar to what we have seen before with simple tables. If you review the formal definition of a simple table and wonder what the empty square brackets are for, here&#x27;s the revelation: the square brackets are used to define the key(s) of a table. Let&#x27;s take a closer look.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">([k1:K1;k2:K2;...;kN:KN] c1:L1; c2:L2; ... ; cn:Ln)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">where </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> - ci is a column name and Li is the corresponding list of column values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> - ki is the name of the key column and Ki are the corresponding keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In practice</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)([name:`Alexander`Stephan`Christoph`Alex] age:36 26 34 34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)([date:4#.z.d; name:`Alexander`Stephan`Christoph`Alex] age:36 26 34 34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">date       name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)([date:.z.d; name:`Alexander`Stephan`Christoph`Alex] age:36 26 34 34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">date       name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2024.06.28 Alex     | 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can verify whether a table is keyed or not by using the <a href="https://code.kx.com/q/ref/type/" target="_blank" rel="noopener noreferrer"><code>type</code></a> keyword. Tables are of type 98h while keyed tables are of type 99h</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="keyed-tables-dictionary-of-dictionaries">Keyed Tables: Dictionary of Dictionaries<a href="#keyed-tables-dictionary-of-dictionaries" class="hash-link" aria-label="Direct link to Keyed Tables: Dictionary of Dictionaries" title="Direct link to Keyed Tables: Dictionary of Dictionaries">​</a></h3>
<p>But wait a moment—if you&#x27;ve been carefully reading this blog post and review the tip I just shared, you&#x27;ll notice something interesting. If a keyed table is of type 99h and dictionaries are also of type 99h, does that mean that a keyed table is a dictionary? Yes, exactly. That&#x27;s precisely what it means. A keyed table is essentially a dictionary of tables.</p>
<p>Let&#x27;s explore this in more detail. Using one of my favorite tools to debug KDB/Q code and understand what&#x27;s happening - the <a href="https://code.kx.com/q/basics/internal/#0nx-show" target="_blank" rel="noopener noreferrer"><code>0N!</code></a> operator - we can see that a keyed table is indeed a dictionary of two tables.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)0N!kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(+(,`name)!,`Alexander`Stephan`Christoph`Alex)!+(,`age)!,36 26 34 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For further illustration and clarification, let&#x27;s create a keyed table by manually creating a dictionary of two tables:</p>
<p>First, we create the table to store the keys of our keyed table. Since we are keying only one column, we need to create a singleton dictionary using the <code>enlist</code> operator. If you&#x27;re not familiar with singleton dictionaries, refer to the previous section on dictionaries <a href="#dictionaries">here</a>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Create a singleton dictionary storing our keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show k:enlist[`name]!enlist `Alexander`Stephan`Christoph`Alex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| Alexander Stephan Christoph Alex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// We can do the same using the new q4.1 syntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show k1:([name:`Alexander`Stephan`Christoph`Alex])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| Alexander Stephan Christoph Alex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Verify that both methods obtain the same result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)k~k1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, we need to create the table containing the values of our keyed table. This table will hold all the details corresponding to the keys. In our previous table, which stored names and ages of our users, we keyed on names, leaving only age as a column. Thus, we need to create another singleton dictionary for the values.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Create a singleton dictionary storing the values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show v:enlist[`age]!enlist 36 26 34 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age| 36 26 34 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// We can do the same using the new q4.1 syntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show v1:([age:36 26 34 34])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age| 36 26 34 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Verify that both methods obtain the same result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)v~v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Finally, we can construct our keyed table by creating a dictionary of two tables, flipping the two column dictionaries we just created: the key dictionary and the value dictionary.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Remember, a table is nothing but a flipped column dictionary</p></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Create a keyed table by creating a dictionary of two tables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show kt1:flip[k]!flip[v]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Show our initial keyed table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Verify that both results match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt~kt1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This conclusion should come as no surprise, given our initial investigation using <code>0N!</code>. By examining the previous output, we can clearly see this concept. It&#x27;s important to understand that the underlying k code for <code>enlist</code> is <code>,</code> and for <code>flip</code> is <code>+</code>. This has been illustrated in the exposed infrastructure section on code.kx.com <a href="https://code.kx.com/q/basics/exposed-infrastructure/" target="_blank" rel="noopener noreferrer">here</a></p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>A note from KX: The use of k expressions in kdb+ applications is unsupported and strongly discouraged.</p></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Inspecting the output of 0N!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)0N!kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(+(,`name)!,`Alexander`Stephan`Christoph`Alex)!+(,`age)!,36 26 34 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Create a name singleton dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)((,)`name)!((,)`Alexander`Stephan`Christoph`Alex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| Alexander Stephan Christoph Alex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Flip it to create a table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(+)((,)`name)!((,)`Alexander`Stephan`Christoph`Alex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Create an age singleton dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)((,)`age)!((,)36 26 34 34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age| 36 26 34 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Flip it to create a table </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(+)((,)`age)!((,)36 26 34 34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Create a keyed table by creating a dictionary from two tables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show kt2:((+)((,)`name)!((,)`Alexander`Stephan`Christoph`Alex))!(+)((,)`age)!((,)36 26 34 34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Verify that this actually matches our initial keyed table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt~kt2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="indexing-into-tables">Indexing into tables<a href="#indexing-into-tables" class="hash-link" aria-label="Direct link to Indexing into tables" title="Direct link to Indexing into tables">​</a></h3>
<p>While this blog post focuses on the concepts of dictionaries and tables in KDB/Q, rather than providing a detailed guide on how to operate on them,  I would still like to give you a brief overview of operations on tables. This includes how to index into tables, insert or update records, and perform other basic operations. For a more comprehensive overview of table operations, please refer to Chapter 8 of <a href="https://code.kx.com/q4m3/8_Tables/" target="_blank" rel="noopener noreferrer">Q for Mortals</a>. In a future blog post, I will cover Q-SQL, detailing how to query KDB/Q tables, as well as joins — a powerful tool in KDB/Q for merging datasets.</p>
<p>First, let&#x27;s explore how to index into a table. Indexing into a table is straightforward, similar to indexing into any other data structure. The only caveat is to be aware of whether we are dealing with a simple table or a keyed table. Let&#x27;s examine both scenarios. Remember that a table can be viewed as a list of conforming dictionaries, and just as we can index into a list using a numerical index, we can do the same with a simple table.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)show t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Using a single index returns a dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| `Alexander</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| `Stephan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| `Christoph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that the returned output is a dictionary, which makes perfect sense since each individual record in a table is a dictionary. However, if we use multiple indices to select two or more records, the result will still be a table. This is also makes sense, considering that a list of conforming dictionaries constitutes a table.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Using two or more indices returns a table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t 0 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Nothing stops you from using the same index several times</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t 0 1 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Additionally, we can use the first and last operator to retrieve the first and last record respectively.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)first t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| `Alexander</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)last t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| `Christoph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Moreover, we can also use the <a href="https://code.kx.com/q/ref/take/" target="_blank" rel="noopener noreferrer"><code>take</code></a> to retrieve a number of rows from a table <code>n#table</code>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)1#t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)2#t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)3#t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Using the take operator requires careful attention. If you attempt to retrieve <code>n</code> records where <code>n</code> exceeds the total number of records in your table (you can check that using <code>count t</code>), take will fill the missing records by cycling through the beginning of the table until all <code>n</code> records are obtained. To ensure you take an exact number of records without repetition, it&#x27;s better to use the <a href="https://code.kx.com/q/ref/sublist/" target="_blank" rel="noopener noreferrer"><code>sublist</code></a> operator.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)5#t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)6#t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)8#t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)5 sublist t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)2 sublist t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>Another great feature of KDB/Q tables is the ability to retrieve entire columns at once by simply using the corresponding column name. This is one of the key reasons for KDB/Q&#x27;s exceptional speed. As a column-oriented database, KDB/Q stores each column of a table as a vector in contiguous memory.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Retrieving the name column of our table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t[`name]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`Alexander`Stephan`Christoph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Retrieving the name and age column of our table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t[`name`age]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander Stephan Christoph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">36        26      34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// You can repeat column names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t[`name`age`name]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander Stephan Christoph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">36        26      34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander Stephan Christoph</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can observe from above, each column is returned as a list.</p>
<p>We can now combine indexing into a table using an index, with indexing into a table using a table column to retrieve one specific element of our table</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// We retrieve a specific element by using the index 2 and then the column name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t[2;`name]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`Christoph</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, let&#x27;s look at how to index into a keyed table. Recall that a keyed table is essentially a dictionary of two tables. From the section on <a href="#indexing-into-a-dictionary">Indexing into dictionaries</a>, we know that you use a key to index into a dictionary. Since a keyed table is a dictionary, the same principle applies.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt[`Alexander]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age| 36</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that just like a dictionary returns only the value associated with the key you used to index into it, a keyed table behaves similarly. From the above code snippet, we can see that when we index into a keyed table using a key, only the value part of the keyed table (i.e., the columns that are not part of the key) is returned.</p>
<p>But can we index into a keyed table using a numerical index? Like we did with a simple table?</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)kt[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  kt[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       ^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>No, we can&#x27;t. As you can see from the example above, using a numerical index on a keyed table will throw a <code>type</code> error. This behavior occurs because our table is keyed on a column of type symbol. Using any type other than a symbol to index into the keyed table will result in a <code>type</code> error. However, if we use a numerical type for our key column, we can use a numerical index to index into this keyed table. Let&#x27;s look at an example.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// First, let&#x27;s create a keyed table using a numerical key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show kt3:([index:0 1 2 3] name:`Alexander`Stephan`Christoph`Alex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index| name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----| ---------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0    | Alexander</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1    | Stephan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2    | Christoph</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3    | Alex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Indexing into our new keyed table using the numerical index 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt3 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| Christoph</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>But what about the other methods of retrieving data that we used on simple tables, such as <a href="https://code.kx.com/q/ref/first/#first" target="_blank" rel="noopener noreferrer"><code>first</code></a>, <a href="https://code.kx.com/q/ref/first/#first" target="_blank" rel="noopener noreferrer"><code>last</code></a>, <a href="https://code.kx.com/q/ref/take/" target="_blank" rel="noopener noreferrer"><code>take</code></a>, and <a href="https://code.kx.com/q/ref/sublist/" target="_blank" rel="noopener noreferrer"><code>sublist</code></a>? Do these methods also work on our keyed tables, and do they produce the same or similar results? Let&#x27;s find out.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)first kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)last kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)1#kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)5#kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)5 sublist kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With the exception of <code>first</code> and <code>last</code>, all other operators work the same way on keyed tables as they do on simple tables. The <code>take</code> operator will return <code>n</code>  records, cycling through the table until <code>n</code> records are retrieved if <code>n</code> is larger than the <code>count</code> of our table. The <code>sublist</code> operator behaves as expected, selecting <code>n</code> records from the table. However, the <code>first</code> and <code>last</code> operators produce different results for keyed tables compared to simple tables. When considering keyed tables as a dictionary of two tables, the results make sense: <code>first</code> and <code>last</code> return the first and last value parts of the first and last records, respectively. Similar to what the <code>first</code> and <code>last</code> operator would return when applied to a dictionary. Because the value part of the keyed table is a table itself, and both operators, <code>first</code> and <code>last</code> only return one record of this table, the result will be a dictionary.</p>
<p>One cool feature of the <code>take</code> operator when used with keyed tables is its ability to retrieve specific records using the keys of the table. Let me demonstrate:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)([] name:`Alexander`Christoph`Stephan`Alex)#kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is particularly useful if you want to retrieve records for specific keys, or in a specific order.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="appending-records-to-tables">Appending records to tables<a href="#appending-records-to-tables" class="hash-link" aria-label="Direct link to Appending records to tables" title="Direct link to Appending records to tables">​</a></h3>
<p>In the final section of this blog post, we will explore the basic methods for inserting data into a table. This process slightly varies between simple tables and keyed tables. A comprehensive discussion on how to insert data into tables is beyond the scope of this post. For a detailed explanation, please refer to the first section of <a href="https://code.kx.com/q4m3/9_Queries_q-sql/" target="_blank" rel="noopener noreferrer">Chapter 9: Queries and Q-Sql</a> in <a href="https://code.kx.com/q4m3/" target="_blank" rel="noopener noreferrer">Q for Mortals</a></p>
<p>Let&#x27;s start by appending some data to our tables:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Review what was in our table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Append a new record by joining a dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t,`name`age!(`Alex;40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      40</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use assign in place to persist the changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t,:`name`age!(`Alex;40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      40</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can append records to a table by joining a dictionary to it. Since a table can be viewed as a list of conforming dictionaries, you can join a dictionary that matches the schema of your table. To persist the changes, you can use in-place assignment.</p>
<p>A great feature of appending records via a dictionary is that the order of the dictionary&#x27;s keys does not need to match the order of the table&#x27;s columns. As long as the data types of the keys match the data types of the columns, the order of the keys is irrelevant. However, the keys in the dictionary must correspond to the column names in the table. Let&#x27;s look at an example.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)show t,: `age`name!(45;`Joe)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe       45</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>But that&#x27;s not all—it&#x27;s not just the order of the keys that can differ. We can also insert a dictionary with fewer keys than the table has columns. The missing columns are automatically filled with a null value of the appropriate column type.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)show t,:(enlist `name)!(enlist `Ted)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe       45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)0N!t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+`name`age!(`Alexander`Stephan`Christoph`Alex`Joe`Ted;36 26 34 34 45 0N)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe       45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ted</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, attempting to insert a dictionary with more keys than the table has columns will result in a mismatch error.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)t,:`name`age`iq!(`Bob;45;127)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;mismatch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  t,:`name`age`iq!(`Bob;45;127)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Appending records via a dictionary is indeed a powerful method, but it can involve quite a bit of typing. Luckily for us, this can be simplified and we actually don&#x27;t have to type the full dictionary</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)show t,:(`Natalia;21)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      40</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia   21</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>But what happens if we are trying to insert a record where one of the column types does not match the schema of our existing table? As you would expect, an error will be thrown</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)meta t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c   | t f a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----| -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age | j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t,:(`Tommy;35.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  t,:(`Tommy;35.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t,:(&quot;Tommy&quot;;35)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;length</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  t,:(&quot;Tommy&quot;;35)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t,:(45;35)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  t,:(45;35)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In our first attempt, we try to append a record where the age is a float. However, as you can see from the meta of our table, the age column is of type long. The obvious error thrown is a <code>type</code> error. Our second append throws a <code>length</code> error. This might come as a surprise initially, but let&#x27;s reflect about it for a moment. We are trying to append a record with a string representation of the name. As we know, strings technically don&#x27;t exist in KDB/Q but are represented as a list of char characters. Hence, what we are actually trying to do is append a list of char characters as the name. Since the name column is of type symbol, meaning each entry should be a symbol <a href="https://code.kx.com/q4m3/2_Basic_Data_Types_Atoms/" target="_blank" rel="noopener noreferrer">atom</a>, we get a <code>length</code> error when trying to insert a list. Our last attempt fails for obvious reasons: we are trying to insert a numerical value for our name column, resulting in a <code>type</code> error.</p>
<p>The above examples highlight the importance of defining the schema of your tables at creation. Creating an empty table without specifying column types is bad practice, as the types will be inferred from the first record you add. This can lead to insert or append failures and potentially serious production outages.</p>
<p>Imagine you create a table to store items and their corresponding prices, including the ID for each item and their price. However, when creating the table schema, you do not define the types for the columns. As shown by the meta data, the columns have no defined type after the table is created. You then proceed to insert the first record, but mistakenly enter the price of the first item (10£) as an integer instead of a floating point number. When you attempt to insert the second item, which has a price of 3.8£, a <code>type</code> error is thrown.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)t1:([] id:(); price:())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)meta t1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c    | t f a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----| -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">price|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t1,:(0;10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0  10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)meta t1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c    | t f a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----| -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id   | j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">price| j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t1,:(2;3.8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  t1,:(2;3.8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A much better approach is to specify the types of your columns when creating the table.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)t1:([] id:`int$(); price:`float$())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)meta t1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c    | t f a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----| -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id   | i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">price| f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t1,:(0;10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  t1,:(0;10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t1,:(0;10.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0  10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t1,:(1;3.8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0  10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1  3.8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You will still receive an error if you try to insert an integer price value rather than a floating point value, however, now the error is perfectly justified and you simply can avoid it by inserting a floating point price value.</p>
<p>Next, let&#x27;s look at how we can append a record to a keyed table. Remember, a keyed table is a dictionary of two tables.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)kt,:(enlist (enlist `name)!enlist `Alex)!enlist (enlist `age)!enlist 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That looks more complicated than it&#x27;s supposed to be. Let&#x27;s break it down into simople steps.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// From right to left</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// First, let&#x27;s remember how to create a singleton dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(enlist `age)!enlist 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Next, a table can be viewed as a list of dictionary, using enlist to create a list of dictionaries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)enlist (enlist `age)!enlist 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Next we create the key dictionary of our keyed table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(enlist (enlist `name)!enlist `Alex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Finally, putting everything together, we obtain a record we can append to our keyed table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(enlist (enlist `name)!enlist `Alex)!enlist (enlist `age)!enlist 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name| age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex| 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That wasn&#x27;t that complicated after all. However, still a lot of typing. Wouldn&#x27;t it be great if this would be easier? Don&#x27;t worry, luckily there is an easier syntax for above</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)kt,:(`Alex;34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It&#x27;s that easy, as long as the the fields you provide match exactly with both key and column values, you can use a list.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="inserting-into-tables">Inserting into tables<a href="#inserting-into-tables" class="hash-link" aria-label="Direct link to Inserting into tables" title="Direct link to Inserting into tables">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="simple-tables">Simple tables<a href="#simple-tables" class="hash-link" aria-label="Direct link to Simple tables" title="Direct link to Simple tables">​</a></h4>
<p>Similar to appending records to an existing table, there are various ways to insert records into a table. While the keyword for this operation is always the same, namely <a href="https://code.kx.com/q4m3/9_Queries_q-sql/#911-basic-insert" target="_blank" rel="noopener noreferrer"><code>insert</code></a>, the format of the records can vary. I&#x27;ll cover the basics and leave the detailed exploration to you.</p>
<p>As with appending a record to a table, we can also insert a dictionary into a table. This should be obvious by now, considering that a table can be seen as a list of conforming dictionaries.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)`t insert `name`age!(`Alex;34)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      34</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The only caveat to be aware of is that the <code>insert</code> operator uses pass-by-name, so you must reference the table by its symbol value. As a result, <code>insert</code> only works with global variables.</p>
<p>Just as with appending a dictionary to a table, we can also shorten the syntax when inserting a new record into a table. We can insert a list of values, provided that each value matches the type of its corresponding column, essentially omitting the column names. Let&#x27;s look at an example.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`t insert (`Alex;40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      40</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That worked like a charm. But what about inserting multiple records? This should follow a similar pattern, right?</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)`t insert ((`Natalia;21);(`Joe;22);(`Ted;39))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;length</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  `t insert ((`Natalia;21);(`Joe;22);(`Ted;39))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Surprisingly, it doesn&#x27;t work that way. But don&#x27;t worry, we have the solution you&#x27;re looking for. When inserting multiple records simultaneously, you need to pass the records as a list of lists, where each sublist corresponds to the values for each column.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)`t insert (`Natalia`Joe`Ted;21 22 39)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 5 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      40</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia   21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe       22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ted       39</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Even though this might not be the most intuitive way to insert multiple records into a table, it&#x27;s precisely the pattern used to publish data from the Feedhandler to the Tickerplant. While inserting multiple records as a list of dictionaries is more intuitive, it requires significantly more typing.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)`t insert ((`name`age!(`Alex;34));(`name`age!(`Natalia;21));(`name`age!(`Bob;45)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 4 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia   21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bob       45</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>But hold on a moment, how many times have we heard that a table is actually a list of dictionaries? It seems we can&#x27;t stress this enough, as repetition helps it stick. If a list of dictionaries is a table, we should be able to insert multiple records by simply inserting a table of new records to the existing table. Let&#x27;s demonstrate this next.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`t insert ([] name:`Natalia`Alex`Bob; age:21 23 45)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 4 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia   21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      23</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bob       45</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That was pretty neat. This concludes the basics of inserting records into a simple table. Next, let&#x27;s explore how we can insert records into a keyed table.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="keyed-tables">Keyed tables<a href="#keyed-tables" class="hash-link" aria-label="Direct link to Keyed tables" title="Direct link to Keyed tables">​</a></h4>
<p>Keyed tables behave quite similarly to simple tables when it comes to inserting new records, with one key difference (pun intended): since the keys of a keyed table are supposed to be unique, you cannot insert a new record with a key that already exists.</p>
<p>As you can see below, inserting a new record into a keyed table when the key doesn&#x27;t exist just works as expected.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`kt insert (enlist ((enlist `name)!enlist `Natalia))!(enlist (enlist `age)!enlist 21)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia  | 21</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, if we try the same operation again, an error will be thrown</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)`kt insert (enlist ((enlist `name)!enlist `Natalia))!(enlist (enlist `age)!enlist 21)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;insert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  `kt insert (enlist ((enlist `name)!enlist `Natalia))!(enlist (enlist `age)!enlist 21)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           ^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This makes perfect sense, as keys are meant to be unique after all.</p>
<p>The above syntax is quite verbose and not particularly easy to read. Let&#x27;s see if we can simplify this operation.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)`kt insert (`Chris;33)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia  | 21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Chris    | 33</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As with simple tables, you can insert into a keyed table by simply providing a list of values, ensuring that each value matches the types of the columns in your keyed table.</p>
<p>Furthermore, as previously discussed, you can insert records that contain fewer columns than the table you are inserting into. In such cases, the missing columns will be populated with null values corresponding to their column types.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)kt2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36  0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26  1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34  2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34  3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`kt2 insert (enlist ((enlist `name)!enlist `Natalia))!(enlist (enlist `age)!enlist 21)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36  0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26  1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34  2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex     | 34  3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia  | 21</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It should not come as a surprise that you can insert one keyed table into another keyed table. However, for completeness, let&#x27;s demonstrate this example as well.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`kt insert ([name:enlist `Natalia] age:enlist 21)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia  | 21</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upsert-fusion-between-insert-and-update">Upsert: Fusion between insert and update<a href="#upsert-fusion-between-insert-and-update" class="hash-link" aria-label="Direct link to Upsert: Fusion between insert and update" title="Direct link to Upsert: Fusion between insert and update">​</a></h3>
<p>If you&#x27;re an anime enthusiast like me, who&#x27;s watched <a href="https://en.wikipedia.org/wiki/Dragon_Ball_Z" target="_blank" rel="noopener noreferrer">Dragon Ball Z</a> you&#x27;re likely familiar with the concept of fusions. It&#x27;s when two characters merge to become a more powerful fighter, blending the strengths of both individuals. For those who haven&#x27;t seen Dragon Ball Z and aren&#x27;t familiar with the concept of fusion, the image below illustrates the fusion between Goku and Vegeta, two of the main characters of Dragon Ball Z.</p>
<p><img decoding="async" loading="lazy" alt="Fusion" src="/assets/images/fusion-28aa89d6b55f2d72a50635474d514b27.jpg" width="1140" height="570" class="img_ev3q"></p>
<p>You might wonder why I&#x27;m suddenly mentioning anime. Have I lost my mind? Perhaps too much KDB/Q code has driven me crazy? Not at all. The reason for bringing up fusions is because <a href="https://code.kx.com/q4m3/9_Queries_q-sql/#92-upsert" target="_blank" rel="noopener noreferrer"><code>upsert</code></a> can be seen exactly as that - a fusion between insert and update. It creates a new, more powerful operator that combines the strengths of both individual operations.</p>
<p>Let&#x27;s explore how this powerful operator works. For simple tables, upsert works much like insert, with the key distinction that upsert also functions on local variables. It supports both, pass-by-name and pass-by-value approaches.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia   21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      23</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bob       45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t upsert (`Joe;29)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia   21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      23</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bob       45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe       29</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia   21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      23</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bob       45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`t upsert (`Joe;29)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia   21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      23</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bob       45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe       29</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Since a simple table can contain duplicate records, where no key column exists to enforce uniqueness, upsert will indeed insert duplicate records just like insert would.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)`t insert (`Joe;29)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia   21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      23</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bob       45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe       29</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe       29</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`t upsert (`Joe;29)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name      age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan   26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia   21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alex      23</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bob       45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe       29</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe       29</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe       29</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>On a keyed table, upsert behaves differently: if the key of the record you are trying to upsert already exists, it updates the values of the corresponding record with the new values from the upserted record. If the key does not exist yet, it simply inserts the new record into the keyed table.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia  | 21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)`kt upsert (`Natalia;25)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia  | 25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)kt upsert (`Joe;29)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name     | age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------| ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alexander| 36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Stephan  | 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Christoph| 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Natalia  | 25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Joe      | 29</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Great! We&#x27;ve covered a lot in this blog post. I hope it has enhanced your understanding of dictionaries and tables. Now, take some time to review and ensure you internalise  the concepts well. If you have any questions, don&#x27;t hesitate to ask. Until then, happy coding!</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/concepts/amend"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Amend, Amend At: The Swiss Army knife among KDB/Q operators</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/concepts/qsql"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">QSQL - Querying Your Data</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#dictionaries" class="table-of-contents__link toc-highlight">Dictionaries</a><ul><li><a href="#creating-dictionaries" class="table-of-contents__link toc-highlight">Creating Dictionaries</a></li><li><a href="#indexing-into-a-dictionary" class="table-of-contents__link toc-highlight">Indexing into a dictionary</a></li><li><a href="#reverse-lookup-finding-values" class="table-of-contents__link toc-highlight">Reverse Lookup: Finding values</a></li><li><a href="#operations-on-a-single-dictionary" class="table-of-contents__link toc-highlight">Operations on a single Dictionary</a></li><li><a href="#operations-involving-multiple-dictionaries" class="table-of-contents__link toc-highlight">Operations involving multiple Dictionaries</a></li><li><a href="#appending-and-amending-dictionaries" class="table-of-contents__link toc-highlight">Appending and Amending dictionaries</a></li><li><a href="#joining-dictionaries" class="table-of-contents__link toc-highlight">Joining Dictionaries</a></li><li><a href="#column-dictionaries" class="table-of-contents__link toc-highlight">Column Dictionaries</a></li></ul></li><li><a href="#tables" class="table-of-contents__link toc-highlight">Tables</a><ul><li><a href="#creating-tables" class="table-of-contents__link toc-highlight">Creating Tables</a><ul><li><a href="#flipped-column-dictionary" class="table-of-contents__link toc-highlight">Flipped column dictionary</a></li><li><a href="#list-of-conform-dictionaries" class="table-of-contents__link toc-highlight">List of conform dictionaries</a></li><li><a href="#formal-table-defintion" class="table-of-contents__link toc-highlight">Formal Table defintion</a></li></ul></li><li><a href="#keyed-tables-vs-tables" class="table-of-contents__link toc-highlight">Keyed Tables vs Tables</a><ul><li><a href="#creating-a-keyed-table" class="table-of-contents__link toc-highlight">Creating a keyed table</a></li></ul></li><li><a href="#keyed-tables-dictionary-of-dictionaries" class="table-of-contents__link toc-highlight">Keyed Tables: Dictionary of Dictionaries</a></li><li><a href="#indexing-into-tables" class="table-of-contents__link toc-highlight">Indexing into tables</a></li><li><a href="#appending-records-to-tables" class="table-of-contents__link toc-highlight">Appending records to tables</a></li><li><a href="#inserting-into-tables" class="table-of-contents__link toc-highlight">Inserting into tables</a><ul><li><a href="#simple-tables" class="table-of-contents__link toc-highlight">Simple tables</a></li><li><a href="#keyed-tables" class="table-of-contents__link toc-highlight">Keyed tables</a></li></ul></li><li><a href="#upsert-fusion-between-insert-and-update" class="table-of-contents__link toc-highlight">Upsert: Fusion between insert and update</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Learn</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/defconq/" target="_blank" rel="noopener noreferrer" class="footer__link-item">DefconQ Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/alexanderunterrainer/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Alexander Unterrainer Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://www.youtube.com/@DefconQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://defconq.substack.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsletter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/DefconQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 DefconQ Ltd. This website is maintained by Alexander Unterrainer. Disclaimer: All content shared on this website reflect solely his personal thoughts and opinions, and is not representative of any past, current, or future employers or affiliations.</div></div></div></footer></div>
</body>
</html>