<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/iterators" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Iterators: Navigating Vectors Without the Need for Loops | DefconQ</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://DefconQ.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://DefconQ.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://DefconQ.github.io/docs/concepts/iterators"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Iterators: Navigating Vectors Without the Need for Loops | DefconQ"><meta data-rh="true" name="description" content="In this blog post, we cover one of the most advanced and challenging concepts in the KDB/Q programming language: Iterators (formerly known as Adverbs). In grammar, an adverb is described as &quot;a word that modifies or describes a verb, an adjective, another adverb, or even a whole sentence&quot; [1]. Similarly, in KDB/Q, adverbs - or as they’re now called, iterators - or as they’re now called, iterators - are higher-order functions that modify how other functions are applied to lists. As someone passionate about finance, I like to think of them as derivatives, as they derive new functionality from the underlying function."><meta data-rh="true" property="og:description" content="In this blog post, we cover one of the most advanced and challenging concepts in the KDB/Q programming language: Iterators (formerly known as Adverbs). In grammar, an adverb is described as &quot;a word that modifies or describes a verb, an adjective, another adverb, or even a whole sentence&quot; [1]. Similarly, in KDB/Q, adverbs - or as they’re now called, iterators - or as they’re now called, iterators - are higher-order functions that modify how other functions are applied to lists. As someone passionate about finance, I like to think of them as derivatives, as they derive new functionality from the underlying function."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://DefconQ.github.io/docs/concepts/iterators"><link data-rh="true" rel="alternate" href="https://DefconQ.github.io/docs/concepts/iterators" hreflang="en"><link data-rh="true" rel="alternate" href="https://DefconQ.github.io/docs/concepts/iterators" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://R6JV2N50EX-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="DefconQ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="DefconQ Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E9ED09HNE3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E9ED09HNE3",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="DefconQ" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.5860f28a.css">
<script src="/assets/js/runtime~main.69dc71ef.js" defer="defer"></script>
<script src="/assets/js/main.238aeed9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#74e8a3" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Stay up to date with the latest blogs posts - subscribe to my free Substack newsletter now <a href="https://defconq.substack.com">Free Substack Newsletter</a> or follow me on <a href="https://medium.com/@defconq">Medium</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="DefconQ Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="150" width="50"><img src="/img/logoLight.svg" alt="DefconQ Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="150" width="50"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Learn</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/about/about">About</a><a class="navbar__item navbar__link" href="/testimonials/testimonials">Testimonials</a><a class="navbar__item navbar__link" href="/happyHour/happyHour">Happy Hour</a><a class="navbar__item navbar__link" href="/cv/cv">CV</a><a href="https://defconq.substack.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Substack Newsletter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://medium.com/@defconq" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://defconq.myspreadshop.co.uk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Swag<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/DefconQ" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/kdbq-study-roadmap">KDB/Q Study Roadmap</a><button aria-label="Expand sidebar category &#x27;KDB/Q Study Roadmap&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/kdbq-language">KDB/Q Language</a><button aria-label="Expand sidebar category &#x27;KDB/Q Language&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/kdbq-architecture">KDB/Q Architecture</a><button aria-label="Expand sidebar category &#x27;KDB/Q Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/important-concepts">Important Concepts</a><button aria-label="Collapse sidebar category &#x27;Important Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/attributes">Attributes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/memoryManagement">Memory Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/garbageCollection">Garbage Collection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/amend">Amend, Amend At: The Swiss Army knife among KDB/Q operators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/dictionariesTables">Dictionaries and Tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/qsql">QSQL - Querying Your Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/fby">Mastering the Art of Filtering: An In-Depth Look at fby in KDB/Q</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/functionalSelect">Embracing Terseness: Functional Forms and Parse Trees</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/joins">Joins: Connecting the Dots for Data Clarity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/concepts/iterators">Iterators: Navigating Vectors Without the Need for Loops</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/ipc">Fundamentals of Interprocess Communication (IPC)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts/ipcNextLevel">Beyond the Fundamentals: Next Level Interprocess Communications</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/design-patterns-for-kdbq-systems">Design Patterns for KDB/Q Systems</a><button aria-label="Expand sidebar category &#x27;Design Patterns for KDB/Q Systems&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/tutorials">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/productivity-tools">Productivity Tools</a><button aria-label="Expand sidebar category &#x27;Productivity Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/important-concepts"><span itemprop="name">Important Concepts</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Iterators: Navigating Vectors Without the Need for Loops</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Iterators: Navigating Vectors Without the Need for Loops</h1>
<p>In this blog post, we cover one of the most advanced and challenging concepts in the KDB/Q programming language: <em><strong>Iterators</strong></em> (formerly known as <strong>Adverbs</strong>). In grammar, an adverb is described as <em><strong>&quot;a word that modifies or describes a verb, an adjective, another adverb, or even a whole sentence&quot;</strong></em> [1]. Similarly, in KDB/Q, adverbs - or as they’re now called, iterators - or as they’re now called, iterators - are higher-order functions that modify how other functions are applied to lists. As someone passionate about finance, I like to think of them as derivatives, as they derive new functionality from the underlying function.</p>
<p>In 2018, the terminology in KDB/Q evolved, and from January 2019, the term &quot;Iterators&quot; officially replaced &quot;Adverbs.&quot; If you’re looking to master Iterators in KDB/Q, there’s no better resource than the white paper on the topic by <a href="https://www.linkedin.com/in/conor-slattery-37b32b32/" target="_blank" rel="noopener noreferrer">Conor Slattery</a> and <a href="https://www.linkedin.com/in/stephen-taylor-b5ba78/" target="_blank" rel="noopener noreferrer">Stephen Taylor</a>, which you can find <a href="https://code.kx.com/q/wp/iterators/" target="_blank" rel="noopener noreferrer">here</a>. I highly recommend reading it thoroughly. That said, I will also share my own thought processes and insights to help you understand the power of Iterators in KDB/Q more effectively.</p>
<p>Iterators can be broadly categorized into two main categories: Maps and Accumulators. In the following sections, we will explore each category and its corresponding iterators in detail, explaining their functionality and providing illustrative examples.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-we-use-iterators">Why we use Iterators<a href="#why-we-use-iterators" class="hash-link" aria-label="Direct link to Why we use Iterators" title="Direct link to Why we use Iterators">​</a></h2>
<p>Before diving into the powerful concept of Iterators and their applications, let’s take a moment to understand why they are such a game-changing tool and why we should use them. If you’ve worked with traditional object-oriented programming languages, you’re probably familiar with one of the most common beginner mistakes: the infamous <em><strong><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IndexOutOfBoundsException.html" target="_blank" rel="noopener noreferrer">IndexOutOfBoundsException</a></strong></em>. This error happens when you try to access an element in a list or array using an index that doesn’t exist - often caused by an error in loop logic.</p>
<p>In KDB/Q, this issue simply doesn’t happen. Iterators not only eliminate the need to manually track indexes, but they’re also significantly faster than traditional loops. Imagine how tedious and time-consuming it would be to write loops - or worse, nested loops - every time you needed to iterate over a list or a list of lists. With Iterators, these challenges disappear, allowing you to focus on the logic rather than wrestling with boilerplate code. It’s efficient, clean, and a joy to work with.</p>
<p>Don’t believe me? Let’s take a look at a simple example. Let’s say we have a list of strings representing fruits we eat, and we want to prepend each fruit’s name with a sentence. It’s a simple, beginner-level exercise. In Python, achieving this requires several lines of code - even though there might be shorter or more efficient methods (I’ll admit, I’m not a Python developer).</p>
<p><strong>Python code:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">fruits = [&quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for i in range(len(fruits)):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  print(&quot;The fruit I ate was a&quot;,fruits[i])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Output:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The fruit I ate was a apple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The fruit I ate was a banana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The fruit I ate was a cherry</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, in KDB/Q, this task is effortlessly handled with Iterators. It’s built into the language, allowing you to accomplish it with unmatched simplicity. This demonstrates the paradigm shift that KDB/Q brings to the table - a change in the way you think and approach programming problems. To borrow a quote from <a href="https://en.wikipedia.org/wiki/Alan_Perlis" target="_blank" rel="noopener noreferrer">Alan Perlis</a>:</p>
<p><em><strong>&quot;A language that doesn&#x27;t affect the way you think about programming is not worth knowing.&quot;</strong></em></p>
<p><strong>Above example in KDB/Q [using the each-right iterator]</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)&quot;The fruit I ate was a &quot;,/:(&quot;apple&quot;;&quot;banana&quot;;&quot;cherry&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;The fruit I ate was a apple&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;The fruit I ate was a banana&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;The fruit I ate was a cherry&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implicit-iteration">Implicit Iteration<a href="#implicit-iteration" class="hash-link" aria-label="Direct link to Implicit Iteration" title="Direct link to Implicit Iteration">​</a></h2>
<p>If you thought that was impressive, hold on tight - there’s even more. As a vector-oriented programming language, KDB/Q introduces the concept of implicit iteration. While a full explanation of this concept goes beyond the scope of this blog post, I highly recommend checking out Stephen Taylor&#x27;s excellent <a href="https://code.kx.com/q/basics/implicit-iteration/" target="_blank" rel="noopener noreferrer">write-up</a> for an in-depth understanding. For now, let’s take a brief look at what implicit iteration entails:</p>
<p>The simplest form of implicit iteration occurs when working with two lists of the same length and applying an operation to them - such as adding them together. In most traditional programming languages, you would need to write a loop to iterate through the elements of both lists and add the numbers pairwise. In KDB/Q, however, this implicit map iteration is built in and works seamlessly right out of the box.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)10 20 30+1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11 22 33</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>But that&#x27;s not all - implicit iteration in KDB/Q also extends to lists of lists. While most traditional programming languages would require you to write nested loops to handle such cases, KDB/Q eliminates that need entirely. As long as each element (or sublist) matches the shape of the corresponding element in the second list, KDB/Q can seamlessly perform implicit iteration and apply the operator appropriately.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)(1 2 3;4 5;6 7 8 9)+(10 11 12;50 60;20 30 40 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11 13 15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">54 65</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">26 37 48 59</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, if even a single sublist from either list does not match the shape of the corresponding sublist in the second list, the operation will fail, resulting in a length error.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Note: We removed the atom 50 from the third sublist of our second list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(1 2 3;4 5;6 7 8 9)+(10 11 12;50 60;20 30 40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;length</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  (1 2 3;4 5;6 7 8 9)+(10 11 12;50 60;20 30 40)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The only exception occurs when one of the elements is an atom. In this case, scalar extension is applied, and the atom is automatically extended to match the shape of the corresponding element in the second list.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Scalar extension applies </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(1 2 3;4 5;6 7 8 9)+(10 11 12;50 60;50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11 13 15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">54 65</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">56 57 58 59</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>All of this is achieved without writing a single loop - amazing, ins&#x27;t it? Implicit iteration is a powerful concept that not only makes KDB/Q incredibly fast but also remarkably elegant. For a deeper dive into implicit iteration, be sure to explore Stephen Taylor&#x27;s detailed post <a href="https://code.kx.com/q/basics/implicit-iteration/" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="maps"><a href="https://code.kx.com/q/ref/maps/" target="_blank" rel="noopener noreferrer">Maps</a><a href="#maps" class="hash-link" aria-label="Direct link to maps" title="Direct link to maps">​</a></h2>
<p>To ease into the topic, we’ll begin with the simpler of the two categories: <strong>Maps</strong>. There are six different Map iterators, summarized in the following table</p>
<table><thead><tr><th>Name</th><th>Keyword</th><th>Operator</th><th>Usage</th></tr></thead><tbody><tr><td>Each</td><td>each</td><td>&#x27;</td><td>v&#x27;</td></tr><tr><td>Each Left</td><td></td><td>\:</td><td>v2\:</td></tr><tr><td>Each Right</td><td></td><td>/:</td><td>v2/:</td></tr><tr><td>Each Parallel</td><td>peach</td><td>&#x27;:</td><td>v1&#x27;:</td></tr><tr><td>Each Prior</td><td>prior</td><td>&#x27;:</td><td>v2&#x27;:</td></tr><tr><td>Case</td><td></td><td>&#x27;</td><td>i&#x27;</td></tr></tbody></table>
<p>where</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> v1: value (rank 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> v2: value (rank 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> v : value (rank 1-8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> i : vector of ints≥0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="each">Each<a href="#each" class="hash-link" aria-label="Direct link to Each" title="Direct link to Each">​</a></h3>
<p>The <code>each</code> iterator, as the name suggests, allows you to apply a function to each element of a list. This is particularly useful when you want to iterate over a list and perform operations on its individual elements. However, it&#x27;s important to note that KDB/Q&#x27;s built-in operators already support implicit scalar iteration, so this functionality is provided natively. As a result, <code>each</code> is most commonly used with custom-defined functions.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax">Syntax<a href="#syntax" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(v1&#x27;) x		v1&#x27;[x]		v1 each x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v1@&#x27;x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x v2 y		v2&#x27;[x;y]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		v3&#x27;[x;y;z]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The each iterator applies a function item-wise to a dictionary, list, or corresponding items of conforming lists and dictionaries. For example, when <code>v</code> is a function, <code>v&#x27;</code> applies <code>v</code> to each item of a list or dictionary, or to matching items from conforming lists. The resulting derived function retains the same rank as <code>v</code>.</p>
<p>This sounds more complicated than it actually is, so let&#x27;s explorer some practical examples. Let’s start by defining a function <code>f</code> that takes a single argument and returns its square. We can then use the <code>each</code> iterator to apply this function to every element of a list, returning the square of each element.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unary-application-of-each">Unary application of <code>each</code><a href="#unary-application-of-each" class="hash-link" aria-label="Direct link to unary-application-of-each" title="Direct link to unary-application-of-each">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)f:{x*x}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show list:1+til 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2 3 4 5 6 7 8 9 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)f each list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 4 9 16 25 36 49 64 81 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// alternative syntax using apply @</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)f@&#x27;list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 4 9 16 25 36 49 64 81 100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Keep in mind that due to implicit scalar iteration, we don’t actually need to use the <code>each</code> iterator to achieve this. Instead, we can simply multiply the two lists directly.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)1 2 3 4 5 6 7 8 9 10 * 1 2 3 4 5 6 7 8 9 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 4 9 16 25 36 49 64 81 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)list*list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 4 9 16 25 36 49 64 81 100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, let’s explore a scenario where the we truly need the <code>each</code> iterator. Imagine we have a list of lists, and we want to determine the length of each sublist. Simply applying the <code>count</code> function to the entire list won’t work, as it will only return the count of elements at the top level (depth 1). However, by combining the <code>count</code> operator with the <code>each</code> iterator, we can efficiently calculate the length of each individual sublist at depth 2.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)count (1 2 3;&quot;Hello World&quot;;2025.01.01 2025.01.02; (`AAPL`GOOG;`MSFT))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)count each (1 2 3;&quot;Hello World&quot;;2025.01.01 2025.01.02; (`AAPL`GOOG;`MSFT))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 11 2 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you’ve read some of my previous blog posts or aren’t entirely new to KDB/Q, you’ll know that many operators in KDB/Q have multiple overloads or different syntax depending on the function’s arity. The same applies to iterators. Let’s explore the various ways <code>each</code> can be used.</p>
<p>As we&#x27;ve already seen, the task above can be accomplished using the code snippet <code>f each list</code>. Additionally, you can use the following syntax to apply a unary function - a function that takes only one argument - to each element of a list:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Original solution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)f each list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 4 9 16 25 36 49 64 81 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// More concise and terse solutions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)f@&#x27;list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 4 9 16 25 36 49 64 81 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(f&#x27;)list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 4 9 16 25 36 49 64 81 100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Although there is no significant performance difference between the syntaxes, I strongly recommend using the first syntax, <code>f each list</code>, for better readability. While this example is quite simple and easy to understand, in a larger codebase with more complex logic, the first approach is much clearer and more readable.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)\ts:1000000 f each list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">726 768</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)\ts:1000000 f@&#x27;list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">781 720</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)\ts:1000000 (f&#x27;)list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">726 688</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="binary-opplication-of-each">Binary opplication of <code>each</code><a href="#binary-opplication-of-each" class="hash-link" aria-label="Direct link to binary-opplication-of-each" title="Direct link to binary-opplication-of-each">​</a></h4>
<p>The binary application of <code>each</code> (often called each-both) is used with binary functions, which take two arguments. This usage requires careful attention, as the lengths of the two arguments are crucial. Both lists must have the same length; otherwise, a length error will occur. The only exception is when one of the arguments is an atom instead of a list. In this case, scalar extension will automatically convert the atom into a list of the same length as the other list, as we’ve previously learned. Let’s see how this works in practice.</p>
<p>Imagine we have two lists of strings (recall that a string in KDB/Q is essentially a list of characters), and we want to concatenate their individual elements pairwise. If we use the concatenate operator <code>,</code> alone, it will simply merge the two strings into one. However, by combining the concatenate operator with the each iterator <code>,&#x27;</code> , we can achieve the desired pairwise concatenation.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)&quot;ABCDE&quot; ,&#x27; &quot;12345&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;A1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;B2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;C3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;D4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;E5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q),&#x27;[&quot;ABCDE&quot;;&quot;12345&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;A1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;B2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;C3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;D4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;E5&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(,&#x27;)[&quot;ABCDE&quot;;&quot;12345&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;A1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;B2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;C3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;D4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;E5&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As noted earlier, if the two lists have differing lengths, a length error will be thrown.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)&quot;ABCDE&quot; ,&#x27; &quot;1234&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;length</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  &quot;ABCDE&quot; ,&#x27; &quot;1234&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Unless one of the lists is a single atom.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)&quot;ABCDE&quot; ,&#x27; &quot;1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;A1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;B1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;C1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;D1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;E1&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="varadic-application-of-each">Varadic application of <code>each</code><a href="#varadic-application-of-each" class="hash-link" aria-label="Direct link to varadic-application-of-each" title="Direct link to varadic-application-of-each">​</a></h4>
<p>Finally, let’s explore the variadic application of the <code>each</code> iterator. As with previous cases, the lengths of the arguments you provide will determine whether the operation succeeds or results in a length error.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Remember: A string is a char vector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){x,y,z}&#x27;[&quot;ABC&quot;;&quot;XYZ&quot;;&quot;123&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;AX1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;BY2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;CZ3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)f:{x+y*z}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)f&#x27;[1 2 3;4 5 6;11 12 13]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">45 62 81</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// If any of the lists isn&#x27;t the same length as the others, a length error is thrown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){x,y,z}&#x27;[&quot;ABC&quot;;&quot;XYZ&quot;;&quot;12&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;length</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  {x,y,z}&#x27;[&quot;ABC&quot;;&quot;XYZ&quot;;&quot;12&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// However, if any list is a single atom, scalar extension kicks in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Two lists and an atom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){x,y,z}&#x27;[&quot;ABC&quot;;&quot;XYZ&quot;;&quot;1&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;AX1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;BY1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;CZ1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// One list and two atoms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){x,y,z}&#x27;[&quot;ABC&quot;;&quot;X&quot;;&quot;1&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;AX1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;BX1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;CX1&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="each-left-">Each-left <code>\:</code><a href="#each-left-" class="hash-link" aria-label="Direct link to each-left-" title="Direct link to each-left-">​</a></h3>
<p>The each-left <code>\:</code> iterator takes a binary function and derives a new binary function that applies the entire <strong>right</strong> argument to each <em><strong>individual</strong></em> element of the <strong>left</strong> argument - hence the name <strong>&quot;each-left.&quot;</strong> Qbies often find it challenging to remember whether they’re dealing with each-left or each-right. Here&#x27;s a simple trick to ensure you&#x27;ll never forget: pay attention to the direction of the slash. If it’s a backslash <code>\</code>, leaning to the left, you’re using the <strong><code>each-left</code></strong> iterator, meaning the entire list on the right is applied to each element on the left. Conversely, if it’s a forward slash <code>/</code>, leaning to the right, you’re using the <strong><code>each-rigth</code></strong> iterator, which applies the entire left argument to each individual element on the right.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-1">Syntax<a href="#syntax-1" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Each Left     x v2\: y    v2\:[x;y]   equivalent to --&gt;   v2[;y] each x</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let&#x27;s have a look at a simple example to demonstrate how each-left works.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)(&quot;Alexander&quot;;&quot;Christoph&quot;;&quot;Stephan&quot;),\:&quot; lives in London&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Alexander lives in London&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Christoph lives in London&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Stephan lives in London&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)&quot;ABC&quot;,\:&quot;XY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;AXY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;BXY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;CXY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Alternative syntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q),\:[&quot;ABC&quot;;&quot;XY&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;AXY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;BXY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;CXY&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Using the <strong>each-left</strong> iterator with a binary function is functionally equivalent to applying a binary function where the <strong>second</strong> argument <code>y</code> is fixed, and the function iterates over each element of the first argument <code>x</code>, as demonstrated below.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q),\:[&quot;ABC&quot;;&quot;XY&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;AXY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;BXY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;CXY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Fixing the y parameter and using each obtains the same result as using each-left</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q),[;&quot;XY&quot;] each &quot;ABC&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;AXY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;BXY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;CXY&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="each-right-">Each-Right <code>/:</code><a href="#each-right-" class="hash-link" aria-label="Direct link to each-right-" title="Direct link to each-right-">​</a></h3>
<p>The each-righht <code>/:</code> iterator is kind of the counter part to the each-left iterator. The each-right iterator takes a binary function and derives a new binary function that applies the entire <strong>left</strong> argument to each <em><strong>individual</strong></em> element of the <strong>right</strong> argument - hence the name <strong>each-right</strong>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-2">Syntax<a href="#syntax-2" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Each Right    x v2/: y    v2/:[x;y]   equivalent to --&gt;   v2[x;] each y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you&#x27;ve understood the concept of each-left, understanding the workings of each-right should be relatively straightforward. However, for the sake of completeness, let&#x27;s explore a few illustrative examples.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)&quot;My name is &quot;,/:(&quot;Alexander&quot;;&quot;Christoph&quot;;&quot;Stephan&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;My name is Alexander&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;My name is Christoph&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;My name is Stephan&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)&quot;ABC&quot;,/:&quot;XY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;ABCX&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;ABCY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Alternative syntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q),/:[&quot;ABC&quot;;&quot;XY&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;ABCX&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;ABCY&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Using the <strong>each-right</strong> iterator with a binary function is functionally equivalent to applying a binary function where the <strong>first</strong> argument <code>x</code> is fixed, and the function iterates over each element of the second argument <code>y</code>, as demonstrated below:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q),/:[&quot;ABC&quot;;&quot;XY&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;ABCX&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;ABCY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q),[&quot;ABC&quot;;] each &quot;XY&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;ABCX&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;ABCY&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="each-parallel">Each Parallel<a href="#each-parallel" class="hash-link" aria-label="Direct link to Each Parallel" title="Direct link to Each Parallel">​</a></h3>
<p>The iterator <strong>each-parallel</strong> <code>&#x27;:</code> - or its corresponding keyword <strong><code>peach</code></strong> - enables parallel execution by delegating processing to secondary tasks. This is particularly useful for computationally intensive functions or scenarios requiring simultaneous access to multiple drives from a single CPU.</p>
<p>To enable parallel execution, start KDB/Q with multiple secondary processes using the <code>-s</code> option in the command line. The <strong>each-parallel</strong> iterator gains a performance improvement by dividing the argument list of the derived function among the available secondary processes for evaluation. The result of applying <strong>each-parallel</strong> to a unary function will always match the result of applying <strong>each</strong> to the same function, meaning <code>m&#x27;:[x]</code> will always be identical to <code>m&#x27;[x]</code>. However, <strong>each-parallel</strong> offers a performance advantage over <strong>each</strong> when secondary tasks are available. If no secondary tasks are available, the performance will remain the same as that of <strong>each</strong>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-3">Syntax<a href="#syntax-3" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(v1&#x27;:)x   v1&#x27;:[x]   v1 peach x</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let&#x27;s illustrate the performance advantage of peach:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// First, we start KDB/Q with secondary threads, in this case 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KDB+ 4.0 2023.01.20 Copyright (C) 1993-2023 Kx Systems</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">m64/ 8(24)core 24576MB alexanderunterrainer mac EXPIRE 2025.02.21 KDB PLUS TRIAL #5018719</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// You can verify the number of available threads using the \s command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)\s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Generate a vector with one million numbers and square each element using the peach iterator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)r_peach:{x*x} peach til 1000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Generate a vector with one million numbers and square each element using the each iterator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)r_each:{x*x} each til 1000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Verify that the result matches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)r_peach~r_each</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// time the same operation using 100 million numbers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)\ts {x*x} peach til 100000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5692 4294967888</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)\ts {x*x} each til 100000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7188 4821226064</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>To start a KDB/Q process with secondary threads, use the <a href="https://code.kx.com/q/basics/cmdline/#-s-secondary-threads" target="_blank" rel="noopener noreferrer"><code>-s n</code></a> command line option. You can check the number of available secondary threads within a KDB/Q process by running the <code>\s</code> command.</p></div></div>
<p>As you can see from the above results, using <code>peach</code> to compute the square of one hundred million numbers results in approximately 30% faster execution time compared to using the <code>each</code> iterator. Moreover, <code>peach</code> consumes around 13% less memory than <code>each</code>.</p>
<p>While incorporating <code>peach</code> into your code can offer clear performance benefits over the standard <code>each</code> iterator, it does come with certain limitations. For example, only the main thread can update global variables. As a result, you need to carefully assess whether <code>peach</code> and parallel processing are the right fit for your application.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="each-prior">Each Prior<a href="#each-prior" class="hash-link" aria-label="Direct link to Each Prior" title="Direct link to Each Prior">​</a></h3>
<p>The <strong>each-prior</strong> <code>&#x27;:</code> iterator - or its coresponding keyword <strong><code>prior</code></strong> - applies a binary function between each element of a list and its preceding element. More precisely, <strong>each-prior</strong> takes a binary function and derives a variadic function that evaluates the function between each item in a list or dictionary and the item that precedes it.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-4">Syntax<a href="#syntax-4" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(v2&#x27;:)x    v2&#x27;:[x]      (v2)prior x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x v2&#x27;:y    v2&#x27;:[x;y]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This might sound more complex than it actually is, so let’s explore an example to help clarify how <strong>each-prior</strong> works:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)(-&#x27;:)100 99 101 105 100 120</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100 -1 2 4 -5 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Looking at the result of the above computation, you&#x27;ll notice that the first element of the result vector stands out. This is because the initial item in the list has no predecessor, so KDB/Q implicitly selects the identity value for the binary function (if one exists).</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The identity value for addition <code>+</code> and subtraction <code>-</code> is 0, whereas for multiplication <code>*</code> and division <code>%</code> it is 1.</p></div></div>
<p>Alternatively, we can specify the initial value to be used as the predecessor by applying it as the left operand of the modified operator. A common choice is to use the first item of the source list. For instance, this approach can be used to calculate the deltas of a list of prices.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)100 -&#x27;: 100 99 101 105 100 120</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 -1 2 4 -5 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you&#x27;re curious about practical applications of the <strong>each-prior</strong> iterator, you might be surprised to learn that it is more commonly used than you might expect. In fact, <strong>each-prior</strong> serves as the foundation for the underlying implementation of keywords like <em><strong><code>deltas, ratios and differ</code></strong></em>. Let me take you behind the scenes to show how it works.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)deltas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)ratios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">%&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)differ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$[&quot;b&quot;]~~&#x27;:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When using <code>deltas</code> without explicitly providing an initial value as the predecessor for the first element of the list, we observe the same behavior we encountered earlier - he first element of the result may not align with our expectations. However, by understanding how to explicitly supply an initial value and slightly modifying the underlying definition of the <strong><code>deltas</code></strong> keyword, we can create our own customized delta function. Let’s do that!</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q){first[x]-&#x27;:x} 100 99 101 105 100 120</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 -1 2 4 -5 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)mydeltas:{first[x]-&#x27;:x}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)mydeltas 100 99 101 105 100 120</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 -1 2 4 -5 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can also use the <code>prior</code> keyword to improve readability.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)prior</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k){x&#x27;:y}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(-) prior 100 99 101 105 100 120</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">100 -1 2 4 -5 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="case">Case<a href="#case" class="hash-link" aria-label="Direct link to Case" title="Direct link to Case">​</a></h3>
<p>The final map iterator we’ll explore is the <strong>case</strong> iterator. To be completely honest, I’ve never actually used it in practice - o if you ever come across a real-world use case (pun intended), feel free to share it with me!
Now, back to iterators: The <strong>case</strong> iterator selects successive items from multiple list arguments, with the left argument of the iterator determining which argument each item is picked from.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-5">Syntax<a href="#syntax-5" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int&#x27;[a;b;c;…]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>where</p>
<ul>
<li><code>int</code> is an integer vector</li>
<li><code>[a;b;c;…]</code> are the arguments to the derived function</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Case Syntax" src="/assets/images/caseSyntax-c672f863d107ebe85106145607a65a98.png" width="630" height="440" class="img_ev3q"></p>
<p>The best way to understand the <strong>case</strong> iterator is through an example. Imagine you have a list of different languages - German, Italian, French, and English - and you want to print the numbers one to six, switching languages in a specific order: German, German, Italian, French, Italian, and English. The <strong>case</strong> iterator makes this task effortless. Let’s see it in action.</p>
<p>We first define a list of avaialble languages, and store them in a variable</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)language:`Italian`German`French`English</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, we have to define the numbers from one to six in each language:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)e:`one`two`three`four`five`six</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)g:`eins`zwei`drei`vier`funf`sechs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)f:`un`deux`trois`quatre`cinq`sees</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)i:`uno`due`tre`quattro`cinque`sei</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We can use the <strong>find</strong> operator <code>?</code> to generate a vector of indices that map to the desired sequence of languages for displaying the numbers. This approach is similar to creating an enumeration (which we will explore in a separate blog post). Let me illustrate the concept.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)language?`German`German`Italian`French`Italian`English</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 1 0 2 0 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Finally, we can use this index vector in combination with the case iterator to cycle through the different languages and select the correct word for each number. Since we aim to display six numbers, our index vector has a length of six. Starting with the first index (0), the value at this position is 1, meaning we will take the word at index 0 from the language list located at index 1. Mind-bending, right? As always, the best way to understand this concept is through an example. After all, a single line of KDB/Q code speaks louder than a million words!</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)(language?`German`German`Italian`French`Italian`English)&#x27;[i;g;f;e]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`eins`zwei`tre`quatre`cinque`six</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)1 1 0 2 0 3&#x27;[i;g;f;e]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`eins`zwei`tre`quatre`cinque`six</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let&#x27;s break it down even further and walk through it step by step:</p>
<p>First, note that our argument list is <code>[i;g;f;e]</code>, representing the list of numbers in different languages: Italian, German, French, and English. The key detail here is the index positions: Italian is at index <code>0</code>, German at index <code>1</code>, French at index <code>2</code>, and English at index <code>3</code>.</p>
<p>Now, we map the index of each language to the desired order in which we want the words to appear—German, German, Italian, French, Italian, and English—resulting in the following vector:<code>1 1 0 2 0 3</code>.</p>
<p>The final output, <code>eins, zwei, tre, quatre, cinque, six</code> is derived as follows:</p>
<ol>
<li><strong>eins</strong>: We first index into our language list at position <code>1</code> (German vector), then index into it at position <code>0</code>, returning <code>eins</code>.</li>
<li><strong>zwei</strong>: Again, we access index <code>1</code> (German vector) and this time retrieve index <code>1</code>, yielding <code>zwei</code></li>
<li><strong>tre</strong>: Moving to index <code>0</code> (Italian vector), we select index <code>2</code>, which gives <code>tre</code></li>
<li><strong>quatre</strong>: Next, at index <code>2</code> (French vector), we fetch index <code>3</code>, producing <code>quatre</code>.</li>
<li><strong>cinque</strong>: Returning to index <code>0</code> (Italian vector), we retrieve index <code>4</code>, yielding <code>cinque</code></li>
<li><strong>six</strong>: Finally, at index <code>3</code> (English vector), we select index <code>5</code>, resulting in <code>six</code></li>
</ol>
<p>By following this pattern, we traverse the entire index vector and achieve the intended sequence of translated numbers.</p>
<p>With this, we wrap up the Map Iterators and can now move on to the Accumulator Iterators: <strong>Scan</strong> <code>\</code> and <strong>Over</strong> <code>/</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="accumulators">Accumulators<a href="#accumulators" class="hash-link" aria-label="Direct link to Accumulators" title="Direct link to Accumulators">​</a></h2>
<p>Every KDB/Q developer knows that mastering Iterator - especially Scan and Over - sets apart an experienced developer from a Qbie (beginner). While similar concepts exist in other programming languages, such as Map and Fold, the syntax of Scan and Over is quite unique and can take time to fully internalize. Moreover, the various overloads of these Iterators, depending on the arity of the function they are applied to, add another layer of complexity to understanding these powerful tools.</p>
<p>In this section, my goal is to help you understand Scan and Over more intuitively. Let&#x27;s begin with an overview of their syntax and various overloads.</p>
<table><thead><tr><th>Name</th><th>Syntax 1</th><th>Syntax 2</th><th>Syntax 3</th></tr></thead><tbody><tr><td><strong>Converge</strong></td><td><code>(v1\)x</code></td><td><code>v1\[x]</code></td><td><code>v1 scan x</code></td></tr><tr><td></td><td><code>(v1/)x</code></td><td><code>v1/[x]</code></td><td><code>v1 over x</code></td></tr><tr><td><strong>Do</strong></td><td><code>n v1\x</code></td><td><code>v1\[n;x]</code></td><td></td></tr><tr><td></td><td><code>n v1/x</code></td><td><code>v1/[n;x]</code></td><td></td></tr><tr><td><strong>While</strong></td><td><code>t v1\x</code></td><td><code>v1\[t;x]</code></td><td></td></tr><tr><td></td><td><code>t v1/x</code></td><td><code>v1/[t;x]</code></td><td></td></tr><tr><td><strong>Scan</strong></td><td><code>(v2\)x</code></td><td><code>v2\[x]</code></td><td><code>(v2)scan x</code></td></tr><tr><td><strong>Over</strong></td><td><code>(v2/)x</code></td><td><code>v2/[x]</code></td><td><code>(v2)over x</code></td></tr><tr><td><strong>Scan</strong></td><td><code>x v2\y</code></td><td><code>v2\[x;y]</code></td><td></td></tr><tr><td><strong>Over</strong></td><td><code>x v2/y</code></td><td><code>v2/[x;y]</code></td><td></td></tr><tr><td><strong>Scan</strong></td><td><code>v3\[x;y;z]</code></td><td><code>x y\z</code></td><td></td></tr><tr><td><strong>Over</strong></td><td><code>v3/[x;y;z]</code></td><td></td><td></td></tr></tbody></table>
<p>where</p>
<ul>
<li><code>v1,v2,v3</code> 	are applicable values of rank 1 to 3, respectively</li>
<li><code>n</code>		is an interger greater or equal to 0 <code>(≥0)</code></li>
<li><code>t</code>		is an unary truth map, basically a truth condition</li>
<li><code>x,y</code>		are the arguments/indexes of <code>v</code></li>
</ul>
<p>An accumulator is an iterator that takes an applicable value as an argument and derives a function that evaluates this value - first on its entire (first) argument, then on the results of successive evaluations. The two iterators, Scan and Over, share the same syntax and perform identical computations. However, while Scan-derived functions return the result of each evaluation step, Over-derived functions return only the final result. The Scan and Over iterators are higher-order functions that serve as the primary mechanism for recursion in KDB/Q. In their simplest form, they modify a binary function to accumulate results over a list.</p>
<p>In many ways, Over is similar to map-reduce in other programming languages.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>While Scan and Over perform the same computation, in general, Over requires less memory, because it does not store intermediate results.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scan--and-over-">Scan <code>\</code> and Over <code>/</code><a href="#scan--and-over-" class="hash-link" aria-label="Direct link to scan--and-over-" title="Direct link to scan--and-over-">​</a></h3>
<p>Since Scan <code>\</code> and Over <code>/</code> share the same syntax and perform the same computation, with the only difference that Scan returns all intermediate accumulations while Over returns only the final result, we will explore both iterators together, providing examples for each.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unary-functions">Unary functions<a href="#unary-functions" class="hash-link" aria-label="Direct link to Unary functions" title="Direct link to Unary functions">​</a></h4>
<p>The first application of Scan and Over we will explore is their combination with a unary function. Depending on the syntax and arguments used, this can result in three distinct behaviors: Converge, Do, or While. In the following sections, we will learn about each of these behaviors in detail.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="converge">Converge<a href="#converge" class="hash-link" aria-label="Direct link to Converge" title="Direct link to Converge">​</a></h5>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Scan (v1\)x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Over (v1/)x		runs until two successive evaluations match, or an evaluation matches x</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When applying Scan or Over to a unary function, a function that takes a single argument, the iterator recursively applies the function, starting from the base case, until the output converges or a loop is detected. Wondering how convergence is determined? At each step, the result is compared to the previous step. If the two values match within an equality tolerance (10⁻¹⁴ at the time of writing), the algorithm is considered to have converged, and recursion stops; otherwise, it continues. Let&#x27;s illustrate this behavior.</p>
<p>Assume we want to repeatedly multiply a given number by 0.1 until the result matches its predecessor within the specified equality tolerance. We can achieve this using the following code.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Convergence using Scan, printing all intermediate steps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){x*0.1}\[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0.01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0.001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0.0001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-06</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-07</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-09</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-19</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1e-21</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)count {x*0.1}\[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">309</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Convergence using Over returns the last value before the recursion terminated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){x*0.1}/[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// the last result of Scan matches the result of Over </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){x*0.1}/[1]~last {x*0.1}\[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Since Over only returns the final result before convergence, we use Scan to visualize the intermediate steps. As seen in the example above, it took 309 iterations for the results to fall within the equality tolerance, at which point convergence was achieved, and the recursion terminated.</p>
<p>The second condition for KDB/Q to terminate recursion is when it detects a loop, meaning the result of an evaluation matches the initial input. Without this safeguard, the process would run indefinitely. The following two examples demonstrate how loop detection works.</p>
<p>First, we use the <a href="https://code.kx.com/q/ref/neg/" target="_blank" rel="noopener noreferrer"><code>neg</code></a> operator to negate the input, producing its negative counterpart. On the second iteration, negating the result again returns the original value, detecting a loop and terminating the recursion.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)(neg\)1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 -1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the second example, we use the <a href="https://code.kx.com/q/ref/rotate/" target="_blank" rel="noopener noreferrer"><code>rotate</code></a> operator to shift a given string (a vector of characters) by one position at a time. Repeating this process eventually brings the string back to its original form, at which point the recursion halts.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)1 rotate &quot;Hello&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;elloH&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)rotate[1;&quot;Hello&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;elloH&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(rotate[1]\)&quot;Hello&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;Hello&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;elloH&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;lloHe&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;loHel&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;oHell&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, despite all these built-in safeguards, it’s still possible to create an infinite loop. One simple way to do so is by understanding how <a href="https://code.kx.com/q/ref/not/" target="_blank" rel="noopener noreferrer"><code>not</code></a> behaves in KDB/Q. In standard Boolean logic, <code>not</code> simply flips the input: <code>0b</code> (false) becomes <code>1b</code> (true) and vice versa. But in KDB/Q, <code>not</code> returns <code>0b</code> when the input is nonzero and <code>1b</code> otherwise.</p>
<p>This means that if we use <code>not</code> with Scan <code>\</code> or Over <code>/</code>, starting with any value other than <code>0</code> or <code>1</code>, we will enter an infinite loop. Applying <code>not</code> to any nonzero number yields <code>0b</code>, and applying <code>not</code> to <code>0b</code> returns <code>1b</code>. Since <code>0</code> will never match <code>1</code>, convergence never occurs. Likewise, because our starting input wasn’t <code>1</code>, a loop is never detected, trapping us in an endless cycle.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>DO NOT RUN BELOW!! You will have to kill your console session if you enter the following code</p></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)not 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)not 1b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)not 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// This will never retunr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(not/) 42 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="do">Do<a href="#do" class="hash-link" aria-label="Direct link to Do" title="Direct link to Do">​</a></h5>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">i v1\x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">i v1/x		i, a non-negative integer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Using Scan <code>\</code> or Over <code>/</code> with a unary function and a non-negative integer effectively mimics a <strong>Do</strong> loop, where the integer specifies the number of iterations, and the right operand serves as the initial value. Leveraging this, we can easily construct a loop that increments a starting value by 1, ten times.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Using Scan to add 1 to 10, 10 times</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)10{x+1}\10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10 11 12 13 14 15 16 17 18 19 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Over returns only the last result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)10{x+1}/10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We can leverage this knowledge to create a pattern I was first introduced by Stephen Taylor. Suppose you want to write a function to identify palindromes, a word, phrase, or sequence that reads the same backwards as forwards. This can be efficiently achieved by combining the reverse operator with Scan, applying the function exactly once. Since Scan outputs the original input as the first result when used in combination with a unary function, you can then compare it with the reversed version and determine whether the two match, indicating a palindrome.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)1 reverse\&quot;anna&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;anna&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;anna&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(~) . 1 reverse\&quot;anna&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(~) . 1 reverse\&quot;annA&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Only when used with a unary function, Scan returns the initial argument.</p></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="while">While<a href="#while" class="hash-link" aria-label="Direct link to While" title="Direct link to While">​</a></h5>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">t v1\x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">t v1/x		until unary value t, evaluated on the result, returns 0 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The last unary overload of Scan <code>\</code> or Over <code>/</code> is equivalent to a &quot;while&quot; loop in imperative programming. It offers a declarative way to define a termination condition for the iteration. The process continues as long as the predicate evaluates to <code>1b</code> and stops otherwise. For instance, we can repeatedly multiply a number by 2 while the result remains less than 100 or square a given input until the result exceeds 1000.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)(100&gt;){2*x}\2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 4 8 16 32 64 128</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(&lt;1000){x*x}\2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;&lt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  (&lt;1000){x*x}\2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){x&lt;1000}{x*x}\2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 4 16 256 65536</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Notice how the second attempt in the code above results in an error? You can prevent this by converting the test condition into a lambda and explicitly defining <code>x</code> within it.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)(10&gt;)4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(&lt;10)4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;&lt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [0]  (&lt;10)4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){10&gt;x}4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){x&lt;10}4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){x&lt;1000}{x*x}\2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 4 16 256 65536</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){100&gt;x}{2*x}\2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 4 8 16 32 64 128</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="binary-functions">Binary functions<a href="#binary-functions" class="hash-link" aria-label="Direct link to Binary functions" title="Direct link to Binary functions">​</a></h4>
<p>When applying the Scan <code>\</code> or Over <code>/</code> iterator to a binary function, it derives a function that first evaluates the value on its entire (first) argument and then on the results of successive evaluations. The number of evaluations corresponds to the count of the right argument.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="binary-application">Binary application<a href="#binary-application" class="hash-link" aria-label="Direct link to Binary application" title="Direct link to Binary application">​</a></h5>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Scan      x v2\y    v2\[x;y]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Over      x v2/y    v2/[x;y]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example, suppose we want to sum the first 10 natural numbers starting from 1. In imperative programming, this would require control flow: initializing a result variable, setting up a loop counter, and iterating while adding to the result until the counter reaches the end of the list.</p>
<p>In KDB/Q, however, you can simply accumulate values, starting with an initial accumulator. There are no counters, no tests, and no explicit loops! Using the binary overload of Scan <code>\</code> or Over <code>/</code>, the initial accumulator value is the left operand, and the list to accumulate over is the right operand. Internally, each item of the list is progressively added to the accumulator, moving through the list until completion. The final accumulated value is then returned.</p>
<p>For instance, with an initial accumulator value of 0:</p>
<ul>
<li>1 is added to 0, resulting in 1</li>
<li>2 is then added to 1, yielding 3</li>
<li>This process continues until the end of the list</li>
</ul>
<p>This operates just like traditional imperative code, but without explicit control structures.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)0+\1 2 3 4 5 6 7 8 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 3 6 10 15 21 28 36 45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)0+/1 2 3 4 5 6 7 8 9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">45</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can use <a href="https://code.kx.com/q/basics/internal/#0nx-show" target="_blank" rel="noopener noreferrer"><code>0N!</code></a> to examine what is happening behind the curtains</p></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)0 {0N!(x;y); x+y}/ 1 2 3 4 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)0+/1 2 3 4 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This pattern of combining Scan or Over with a binary function is so powerful that several keywords leverage it behind the scenes. Here are some of them:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)sum 1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(+/)1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)sums</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)sums 1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 3 6 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(+\)1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 3 6 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)prd 1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(*/)1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)prds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(*\)1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2 6 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)min 1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(&amp;/)1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)mins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(&amp;\)1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 1 1 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)max 1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(|/)1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)maxs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(|\)1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2 3 4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="unary-application">Unary application<a href="#unary-application" class="hash-link" aria-label="Direct link to Unary application" title="Direct link to Unary application">​</a></h5>
<p>Although applying a binary function in a unary context might seem counterintuitive, in many cases, explicitly specifying the initial accumulator value is unnecessary.</p>
<p>For instance, in our summation example, instead of providing an initial accumulator, we can simply start with the first item in the list and accumulate the remaining values. This is achieved by enclosing the modified function in parentheses and omitting the initial accumulator:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)(+\) 1 2 3 4 5 6 7 8 9 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 3 6 10 15 21 28 36 45 55</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(+/) 1 2 3 4 5 6 7 8 9 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">55</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Conceptually, you can think of the list in its general form:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)(1; 2; 3; 4; 5; 6; 7; 8; 9; 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2 3 4 5 6 7 8 9 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)1+til 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2 3 4 5 6 7 8 9 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(1; 2; 3; 4; 5; 6; 7; 8; 9; 10)~1+til 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(1 2 3 4 5 6 7 8 9 10)~(1; 2; 3; 4; 5; 6; 7; 8; 9; 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Using <code>(+/)</code> effectively replaces the semicolons <code>;</code> with a plus <code>+</code>, associating the operation from the left.</p>
<p><strong>A few key points about this form</strong>:</p>
<ul>
<li>The parentheses are necessary</li>
<li>The modified function is now unary.</li>
<li>This code is actually <code>k</code> code rather than <code>KDB/Q</code> - so you&#x27;re technically writing <code>k</code> code (Don&#x27;t tell anyone!)</li>
</ul>
<p>Moreover, both, the unary and binary from of Scan <code>\</code> and Over <code>/</code> can also be written in prefix notation</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)+/[0; 1 2 3 4 5 6 7 8 9 10]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">55</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)+\[0; 1 2 3 4 5 6 7 8 9 10]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 3 6 10 15 21 28 36 45 55</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)+/[1 2 3 4 5 6 7 8 9 10]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">55</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)+\[1 2 3 4 5 6 7 8 9 10]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 3 6 10 15 21 28 36 45 55</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="the-keywords-scan-and-over">The keywords <code>scan</code> and <code>over</code><a href="#the-keywords-scan-and-over" class="hash-link" aria-label="Direct link to the-keywords-scan-and-over" title="Direct link to the-keywords-scan-and-over">​</a></h5>
<p>You can use the <code>scan</code> and <code>over</code> keywords to apply a binary function to a list or dictionary. However, if you are using an infix function as the left argument, make sure to enclose it in parentheses.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)(+) scan 1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 3 6 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(+) over 1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)show d:`a`b`c`d!`b`d`c`a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a| b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b| d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c| c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d| a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d scan `a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`a`b`d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d over `b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)d scan `b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`b`d`a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ternary-functions">Ternary functions<a href="#ternary-functions" class="hash-link" aria-label="Direct link to Ternary functions" title="Direct link to Ternary functions">​</a></h4>
<p>Finally, let&#x27;s examine the combination of iterators with ternary functions (functions that take three arguments) or functions of even higher arity (up to eight arguments). When an accumulator derives a function from an initial function with a rank greater than two, it retains the same rank as the original function. Functions derived using <strong>Scan</strong> <code>\</code> are uniform, while those derived using <strong>Over</strong> <code>/</code> are aggregates. The number of evaluations corresponds to the maximum count of the right arguments.</p>
<p>For <code>v\[x;y;z]</code> and <code>v/[x;y;z]</code>:</p>
<ul>
<li><code>x</code> is the initial argurment, and belongs to the left domain of <code>v</code></li>
<li><code>y</code> and <code>z</code> are either atoms, conforming lists, or dictionaries within the right domains of <code>v</code></li>
<li>The first evaluation is <code>v[x; first y; first z]</code>, and its result becomes the left argument for the next evaluation, continuing in this manner.</li>
</ul>
<p>For example, for <code>r:v\[x;y;z]</code>, the iterative process applies the function across the provided arguments accordingly.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">r[0]: v[x  ; y 0; z 0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r[1]: v[r 0; y 1; z 1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r[2]: v[r 1; y 2; z 2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">…</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The result of <code>v/[x;y;z]</code> is simply the last item of the above</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">v/[x;y;z]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v[ v[… v[ v[x;y0;z0] ;y1;z1]; … yn-2;zn-2]; yn-1;zn-1]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here are some examples to help you get familiar with this syntax and concept.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q){x+y*z}\[1000;5 10 15 20;2 3 4 5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1010 1040 1100 1200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q){x+y*z}\[1000 2000;5 10 15 20;3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1015 2015</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1045 2045</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1090 2090</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1150 2150</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>But what about a more practical example? Imagine you&#x27;re working at a large corporation with hundreds of processes running across multiple regions, each with several instances. Your team follows a naming convention: <code>&quot;ProcessName.Region_InstanceNumber&quot;</code>, such as <code>&quot;ProcessName.Region_InstanceNumber&quot;</code>. Your task is to extract the region from a given process name. While this might seem trivial, you&#x27;d be surprised how tricky it can be in many mainstream programming languages. However, in KDB/Q, it&#x27;s just a one-liner! By combining the Over iterator <code>/</code> with the <code>vs</code>,<code>first</code>, and <code>last</code> operators, we can easily achieve this. Let&#x27;s try it!</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q){z y vs x}/[&quot;TICKERPLANT.US_1&quot;;&quot;._&quot;;(last;first)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;US&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Magic? Not quite—but close! Here&#x27;s what&#x27;s happening:</p>
<p>The input <code>&quot;TICKERPLANT.US_1&quot;</code> is passed as <code>x</code> to our lambda <code>{z y vs x}</code>, along with the first item of <code>y</code>, which is <code>&quot;.&quot;</code>, and the first item of <code>z</code>, which is the <code>last</code> operator. This results in the expression:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">last &quot;.&quot; vs &quot;TICKERPLANT.US_1&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>which evaluates to <code>&quot;US_1&quot;</code>. This intermediate result is then passed as <code>x</code> into the next iteration of our lambda, where <code>y</code> is <code>&quot;_&quot;</code> and <code>z</code> is <code>first</code>, forming:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">first &quot;_&quot; vs &quot;US_1&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>which returns the final result: <code>&quot;US&quot;.</code> In theory, you could achieve the same result with:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)first &quot;_&quot; vs last &quot;.&quot; vs &quot;TICKERPLANT.US_1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;US&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>but it&#x27;s nowhere near as elegant as our approach using <strong>Over</strong>.</p>
<p>This concludes our section on <strong>Scan</strong> <code>\</code> and <strong>Over</strong> <code>/</code>. Take a moment to review their various overloads, syntax, and the different behaviors they exhibit based on function arity and the number of parameters.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="combining-iterators">Combining Iterators<a href="#combining-iterators" class="hash-link" aria-label="Direct link to Combining Iterators" title="Direct link to Combining Iterators">​</a></h2>
<p>The power of Iterators extends beyond their individual applications - you can also combine them to create even more efficient and powerful code. In the next section, we will explore two examples that demonstrate how iterators can be used in combination.</p>
<p>For our first example, let&#x27;s say you have two lists of numbers and want to determine all possible ways to pair their elements. This is essentially finding the <a href="https://en.wikipedia.org/wiki/Permutation" target="_blank" rel="noopener noreferrer">permutations</a> of two sets, a common problem in mathematics. While it’s easy to do manually with pen and paper, implementing it in code can be less straightforward.</p>
<p>Consider the list <code>1 2 3</code>, and suppose we want to generate all possible pairs of these numbers with themselves. Our two lists are <code>1 2 3</code> and <code>1 2 3</code>. The expected output would be:</p>
<ul>
<li><code>(1,1), (1,2), (1,3)</code></li>
<li><code>(2,1), (2,2), (2,3)</code></li>
<li><code>(3,1), (3,2), (3,3)</code></li>
</ul>
<p>Seems simple, right? But how would you implement this? Combining two iterators, the <strong>each-right</strong> <code>/:</code> and the <strong>each-left</strong> <code>\:</code> iterators, this task becomes a simple, concise KDB/Q one-liner. Let&#x27;s take a look at how this works:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)1 2 3 ,/:\:1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 1 1 2 1 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 1 2 2 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 1 3 2 3 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the output doesn’t look as expected because you anticipated a list of pairs, let’s take a closer look at the actual structure. We can use the <a href="https://code.kx.com/q/basics/internal/#0nx-show" target="_blank" rel="noopener noreferrer"><code>0N!</code></a> operator to inspect the underlying data format. Doing so reveals that the output is, in fact, a list of lists, or more precisely, a list of pairs (tuples).</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)0N!1 2 3 ,/:\:1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">((1 1;1 2;1 3);(2 1;2 2;2 3);(3 1;3 2;3 3))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 1 1 2 1 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 1 2 2 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 1 3 2 3 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We can now apply the <a href="https://code.kx.com/q/ref/raze/" target="_blank" rel="noopener noreferrer"><code>raze</code></a> operator to flatten one level of nesting in our result, giving us the exact output we expect.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)raze 1 2 3 ,/:\:1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)0N!raze 1 2 3 ,/:\:1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1 1;1 2;1 3;2 1;2 2;2 3;3 1;3 2;3 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Our next example builds on the previous one as we take a deeper look at the <a href="https://code.kx.com/q/ref/raze/" target="_blank" rel="noopener noreferrer"><code>raze</code></a> operator. If we examine how <code>raze</code> is defined under the hood, we see that it’s simply a combination of the concatenate operator <code>,</code> and the <strong>Over</strong> <code>/</code> iterator.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)raze</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This makes sense because flattening one level of nesting is essentially just joining or concatenating the nested lists at that level. But what if the nesting goes deeper, spanning multiple levels? This is where combining iterators comes in handy to achieve full flattening across all levels. By applying <code>raze</code> with <strong>Over</strong>, essentially using <strong>Over</strong> twice, we can completely eliminate all layers of nesting.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Create a list with several layers of nesting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)(1; (1 2;(1 2 3;4 5);(10 12;13 14));(((3 4;5 6);(10 20 30;40 50));(1 2;3 4)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1 2;(1 2 3;4 5);(10 12;13 14))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(((3 4;5 6);(10 20 30;40 50));(1 2;3 4))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Applying raze only eliminates one level of nesting </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)raze (1; (1 2;(1 2 3;4 5);(10 12;13 14));(((3 4;5 6);(10 20 30;40 50));(1 2;3 4)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1 2 3;4 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(10 12;13 14)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">((3 4;5 6);(10 20 30;40 50))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1 2;3 4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// However, combining raze with over will eliminate all layers of nesting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)raze/[(1; (1 2;(1 2 3;4 5);(10 12;13 14));(((3 4;5 6);(10 20 30;40 50));(1 2;3 4)))]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 1 2 1 2 3 4 5 10 12 13 14 3 4 5 6 10 20 30 40 50 1 2 3 4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you want even more concise and elegant code, you can take advantage of <code>raze</code>&#x27;s underlying definition and combine it with <strong>Over</strong> to create the terse expression <code>(,//)x</code>, which achieves the same result as <code>raze/[x]</code>. However, keep in mind that this is <code>k</code> code rather than <code>q</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)(,//)(1; (1 2;(1 2 3;4 5);(10 12;13 14));(((3 4;5 6);(10 20 30;40 50));(1 2;3 4)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 1 2 1 2 3 4 5 10 12 13 14 3 4 5 6 10 20 30 40 50 1 2 3 4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>But why stop here? You can take it a step further and create a modified version of <code>raze</code> hat allows you to control how many levels of nesting you want to flatten. Shortly after I published the initial version of this blog post, none other than <a href="https://www.linkedin.com/in/charlesskelton/" target="_blank" rel="noopener noreferrer">Charles Skelton</a>, former CTO and now Chief Scientist at KX, suggested this addition. The elegant snippet <code>n,//x</code> lets you flatten a nested list <code>n</code> times. And that’s exactly what I aim for with DefconQ, to foster a collaborative space where KDB/Q developers can learn and grow together!</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q)3,//(1; (1 2;(1 2 3;4 5);(10 12;13 14));(((3 4;5 6);(10 20 30;40 50));(1 2;3 4)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10 20 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">40 50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)2,//(1; (1 2;(1 2 3;4 5);(10 12;13 14));(((3 4;5 6);(10 20 30;40 50));(1 2;3 4)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10 12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13 14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(3 4;5 6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(10 20 30;40 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)1,//(1; (1 2;(1 2 3;4 5);(10 12;13 14));(((3 4;5 6);(10 20 30;40 50));(1 2;3 4)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1 2 3;4 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(10 12;13 14)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">((3 4;5 6);(10 20 30;40 50))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1 2;3 4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)4,//(1; (1 2;(1 2 3;4 5);(10 12;13 14));(((3 4;5 6);(10 20 30;40 50));(1 2;3 4)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 1 2 1 2 3 4 5 10 12 13 14 3 4 5 6 10 20 30 40 50 1 2 3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q),//[2;(1; (1 2;(1 2 3;4 5);(10 12;13 14));(((3 4;5 6);(10 20 30;40 50));(1 2;3 4)))]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10 12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13 14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(3 4;5 6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(10 20 30;40 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips-and-tricks">Tips and Tricks<a href="#tips-and-tricks" class="hash-link" aria-label="Direct link to Tips and Tricks" title="Direct link to Tips and Tricks">​</a></h2>
<p>We&#x27;ve now covered all the Iterators, their syntax, overloads, behaviors, and functionality. Most of the content in this blog post is not new and has been documented on <a href="https://code.kx.com/home/" target="_blank" rel="noopener noreferrer">code.kx.com</a>. However, in this section, I&#x27;d like to share a few tips and tricks.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-know-which-iterator-is-used">How to know which iterator is used<a href="#how-to-know-which-iterator-is-used" class="hash-link" aria-label="Direct link to How to know which iterator is used" title="Direct link to How to know which iterator is used">​</a></h3>
<p>The first question, identifying which Iterator is used in a given piece of code, is relatively straightforward: simply look at the operator. It should be easy to distinguish between <strong>Each</strong> <code>&#x27;</code> (<code>each</code>), <strong>Each-Left</strong> <code>\:</code>, and <em>8Each-Right</em>* <code>/:</code> (remember, you can tell <strong>Each-left</strong> from <strong>Each-right</strong> based on which direction the slash leans), as well as <strong>Scan</strong> <code>\</code> and <strong>Over</strong> <code>/</code>.</p>
<p>Where things get trickier is distinguishing between <strong>Each-both</strong> <code>&#x27;</code>, <strong>Each-Prior</strong> <code>&#x27;:</code>, <strong>Each-Parallel</strong> <code>&#x27;:</code>, or determining which overload of <strong>Scan</strong> and <strong>Over</strong> is being used. In these cases, your next step should be to examine the arity of the function the Iterator is applied to: how many arguments it takes and how many are being passed.</p>
<p>If a unary function is used, <strong>Scan</strong> and <strong>Over</strong> can exhibit three different behaviors: <strong>Converge</strong>, <strong>Do</strong>, or <strong>While</strong>. This depends on the number and type of parameters passed:</p>
<ul>
<li><strong>Converge</strong>: No parameter is passed.</li>
<li><strong>Do</strong>: The <code>x</code> argument is a positive integer.</li>
<li><strong>While</strong>: The first argument <code>x</code> is a true condition.</li>
</ul>
<p>Following this approach will help you understand what’s really happening in the code. Additionally, it&#x27;s always a good idea to have a KDB/Q console open so you can test snippets and observe their behavior firsthand.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-understand-whats-happening">How to understand what&#x27;s happening<a href="#how-to-understand-whats-happening" class="hash-link" aria-label="Direct link to How to understand what&#x27;s happening" title="Direct link to How to understand what&#x27;s happening">​</a></h3>
<p>If you&#x27;re still struggling to understand what&#x27;s happening, don’t panic. Take a deep breath and take a step back.</p>
<p>If you&#x27;re using the <strong>Over</strong> <code>/</code> iterator and can&#x27;t quite understand how the final result was achieved, try replacing <strong>Over</strong> <code>/</code> with <strong>Scan</strong> <code>\</code>. This will display all the intermediate steps, which might help you spot a pattern and better understand the process. Seeing the full sequence of calculations can often make things clearer.</p>
<p>For any other Iterator, or really any piece of code, use <code>0N!</code> to print to the console. It&#x27;s one of the fundamental debugging techniques: print out values to see what’s going on under the hood.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">q){0N!(x;y);x,y}/:\:[1 2 3;4 5 6]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 4 1 5 1 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 4 2 5 2 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 4 3 5 3 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">q)1 2 3,/:\:4 5 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 4 1 5 1 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 4 2 5 2 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 4 3 5 3 6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That wraps up our session on Iterators. I hope you found it helpful and enjoyable! If you did, feel free to follow <a href="https://www.linkedin.com/in/alexanderunterrainer/" target="_blank" rel="noopener noreferrer">me</a> and <a href="https://www.linkedin.com/company/defconq/" target="_blank" rel="noopener noreferrer"><strong>DefconQ</strong></a> on LinkedIn and subscribe to my free <a href="https://defconq.substack.com" target="_blank" rel="noopener noreferrer">newsletter</a> to stay updated with my latest blog posts and get updates straight to your inbox.</p>
<p><strong>Until next time - happy coding!</strong></p>
<p><strong>Resources:</strong></p>
<ul>
<li><a href="https://www.grammarly.com/blog/parts-of-speech/adverb/#:~:text=An%20adverb%20is%20a%20word,brought%20an%20umbrella.%E2%80%9D" target="_blank" rel="noopener noreferrer">Grammarly: What Is an Adverb? Definition and Examples</a></li>
<li><a href="https://code.kx.com/q/about/terminology/" target="_blank" rel="noopener noreferrer">KDB/Q Terminology</a></li>
<li><a href="https://code.kx.com/q4m3/6_Functions/#67-iterators" target="_blank" rel="noopener noreferrer">Q for Mortals: 6.7 Iterators</a></li>
<li><a href="https://code.kx.com/q/wp/iterators/" target="_blank" rel="noopener noreferrer">Guide to iterators: A white paper</a></li>
<li><a href="https://code.kx.com/q/basics/iteration/" target="_blank" rel="noopener noreferrer">KX Documentation: Iteration</a></li>
<li><a href="https://code.kx.com/q/basics/implicit-iteration/" target="_blank" rel="noopener noreferrer">Implicit Iteration</a></li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/concepts/joins"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Joins: Connecting the Dots for Data Clarity</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/concepts/ipc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Fundamentals of Interprocess Communication (IPC)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-we-use-iterators" class="table-of-contents__link toc-highlight">Why we use Iterators</a></li><li><a href="#implicit-iteration" class="table-of-contents__link toc-highlight">Implicit Iteration</a></li><li><a href="#maps" class="table-of-contents__link toc-highlight">Maps</a><ul><li><a href="#each" class="table-of-contents__link toc-highlight">Each</a><ul><li><a href="#syntax" class="table-of-contents__link toc-highlight">Syntax</a></li><li><a href="#unary-application-of-each" class="table-of-contents__link toc-highlight">Unary application of <code>each</code></a></li><li><a href="#binary-opplication-of-each" class="table-of-contents__link toc-highlight">Binary opplication of <code>each</code></a></li><li><a href="#varadic-application-of-each" class="table-of-contents__link toc-highlight">Varadic application of <code>each</code></a></li></ul></li><li><a href="#each-left-" class="table-of-contents__link toc-highlight">Each-left <code>\:</code></a><ul><li><a href="#syntax-1" class="table-of-contents__link toc-highlight">Syntax</a></li></ul></li><li><a href="#each-right-" class="table-of-contents__link toc-highlight">Each-Right <code>/:</code></a><ul><li><a href="#syntax-2" class="table-of-contents__link toc-highlight">Syntax</a></li></ul></li><li><a href="#each-parallel" class="table-of-contents__link toc-highlight">Each Parallel</a><ul><li><a href="#syntax-3" class="table-of-contents__link toc-highlight">Syntax</a></li></ul></li><li><a href="#each-prior" class="table-of-contents__link toc-highlight">Each Prior</a><ul><li><a href="#syntax-4" class="table-of-contents__link toc-highlight">Syntax</a></li></ul></li><li><a href="#case" class="table-of-contents__link toc-highlight">Case</a><ul><li><a href="#syntax-5" class="table-of-contents__link toc-highlight">Syntax</a></li></ul></li></ul></li><li><a href="#accumulators" class="table-of-contents__link toc-highlight">Accumulators</a><ul><li><a href="#scan--and-over-" class="table-of-contents__link toc-highlight">Scan <code>\</code> and Over <code>/</code></a><ul><li><a href="#unary-functions" class="table-of-contents__link toc-highlight">Unary functions</a><ul><li><a href="#converge" class="table-of-contents__link toc-highlight">Converge</a></li><li><a href="#do" class="table-of-contents__link toc-highlight">Do</a></li><li><a href="#while" class="table-of-contents__link toc-highlight">While</a></li></ul></li><li><a href="#binary-functions" class="table-of-contents__link toc-highlight">Binary functions</a><ul><li><a href="#binary-application" class="table-of-contents__link toc-highlight">Binary application</a></li><li><a href="#unary-application" class="table-of-contents__link toc-highlight">Unary application</a></li><li><a href="#the-keywords-scan-and-over" class="table-of-contents__link toc-highlight">The keywords <code>scan</code> and <code>over</code></a></li></ul></li><li><a href="#ternary-functions" class="table-of-contents__link toc-highlight">Ternary functions</a></li></ul></li></ul></li><li><a href="#combining-iterators" class="table-of-contents__link toc-highlight">Combining Iterators</a></li><li><a href="#tips-and-tricks" class="table-of-contents__link toc-highlight">Tips and Tricks</a><ul><li><a href="#how-to-know-which-iterator-is-used" class="table-of-contents__link toc-highlight">How to know which iterator is used</a></li><li><a href="#how-to-understand-whats-happening" class="table-of-contents__link toc-highlight">How to understand what&#39;s happening</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Learn</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/company/defconq/" target="_blank" rel="noopener noreferrer" class="footer__link-item">DefconQ Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/alexanderunterrainer/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Alexander Unterrainer Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://defconq.myspreadshop.co.uk" target="_blank" rel="noopener noreferrer" class="footer__link-item">DefconQ Swag<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://www.youtube.com/@DefconQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://defconq.substack.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Substack Newsletter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://medium.com/@defconq" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/DefconQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 DefconQ Ltd. This website is maintained by Alexander Unterrainer. Disclaimer: All content shared on this website reflect solely his personal thoughts and opinions, and is not representative of any past, current, or future employers or affiliations.</div></div></div></footer></div>
</body>
</html>